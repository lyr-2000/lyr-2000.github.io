---
title: "JVM 加载类的 方式"
date: 2021-08-17T13:48:22+08:00
draft: false
author: LYR

---







## 加载类的方式

加载类的方式有以下几种：

>  1）从本地系统直接加载
>
> 2）通过网络下载.class文件
>
> 3）从zip，jar等归档文件中加载.class文件
>
> 4）从专有数据库中提取.class文件
>
> 5）将Java源文件动态编译为.class文件（服务器）





1、invokeinterface:调用接口中的方法，实际上是在运行期决定的，决定到底调用实现该接口的那个对象的特定方法。4
2、invokestatic : 调用静态方法
3、invokespecial: 调用自己的私有方法，构造方法()以及父类的方法。
4、invokevirtual: 调用虚方法，运行期动态查找的过程。
5、invokedynamic: 动态调用方法。
————————————————
版权声明：本文为CSDN博主「魔鬼_」的原创文章，遵循CC 4.0 BY-SA版权协议，转载请附上原文出处链接及本声明。
原文链接：https://blog.csdn.net/wzq6578702/article/details/82711236

## 初始化的过程



虚拟机把描述类的数据从Class文件加载到内存，并对数据进行校验、转换解析和初始化，最终形成可被虚拟机直接使用的Java类型，这就是虚拟机的类加载机制。

Java语言中类的加载、连接和初始化过程都是在程序运行期间完成的，领Java具备高度的灵活性。

类加载的过程：加载、连接（验证、准备、解析）、初始化。

– 加载：通过一个类的名字获取此类的二进制字节流（PS：不限于从文件中读取）；将这个字节流代表的静态存储结构转换为方法区的运行时结构（由具体的虚拟机自己定义）；在内存中生成一个java.lang.Class对象，作为方法区这个类的各种数据结构的访问入口。

– 验证：文件格式验证、元数据验证（语义分析，类与类的继承关系等）、字节码验证（数据流和控制流分析）、符号引用验证（对类自身以外的信息进行匹配校验）

– 准备：正式为**类变量**分配内存并设置初始值，这里类变量指的是被static修饰的变量。例外：如果类字段是常量，则在这里会被初始化为表达式指定的值。

– 解析：将常量池内的符号引用替换为直接引用。符号引用：类似于OS中的逻辑地址；直接引用：类似于OS中的物理地址，直接指向目标的指针、相对偏移量或一个能间接定位到目标的句柄。

– 初始化：真正开始执行类中定义的Java程序代码；初始化用于执行Java类的构造方法。类初始化的过程是不可逆的，如果中间一步出错，则无法执行下一步。



