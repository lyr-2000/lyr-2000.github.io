---
title: "mysql索引原理"
date: 2021-08-17T13:48:22+08:00
draft: false
author: LYR
---



### mysql 索引原理



### 什么是回表

回表的概念，去根据索引搜索到 数据，但是索引中没有要查找的数据，就要去定位到那个行，去把数据行中的数据搜索出来【这个就是回表】



### 什么是覆盖索引



数据之间在索引里面，之间把数据从索引里面读取出来即可，这个就是覆盖索引。

[学习视频](https://www.bilibili.com/video/BV1Xg411j7rQ?from=search&seid=5325859591478492772)

**如果一个索引覆盖（包含）了所有需要查询的字段的值，这个索引就是覆盖索引。**因为索引中已经包含了要查询的字段的值，因此查询的时候直接返回索引中的字段值就可以了，不需要再到表中查询，避免了对主键索引的二次查询【又叫**回表**】，也就**提高了查询的效率。**



###  B+ 树

**最左前缀匹配原则：**在MySQL建立联合索引时会遵守最左前缀匹配原则，即最左优先，在检索数据时从联合索引的最左边开始匹配。

　　要想理解联合索引的最左匹配原则，先来理解下索引的底层原理。索引的底层是一颗B+树，那么联合索引的底层也就是一颗B+树，只不过联合索引的B+树节点中存储的是键值。由于构建一棵B+树只能根据一个值来确定索引关系，所以数据库依赖联合索引最左的字段来构建。

举例：创建一个（a,b）的联合索引，那么它的索引树就是下图的样子。



![img](https://img2020.cnblogs.com/blog/1804577/202005/1804577-20200521182659976-48843100.png)



mysql 就是从左往右去检索数据的，这个叫做联合索引。



### 聚集索引

 聚簇索引也叫聚集索引，它并不是一种单独的索引类型，在聚簇索引的叶子页中，保存了整张表的行数据信息，所以也将聚簇索引的叶子节点称为数据页。
  名词 “聚簇” 表示数据行和相邻的键值紧凑的存储在一起。因为不能同时把数据行存储在两个不同的地方，所以一个表只能有一个聚簇索引。



### 非聚集索引



辅助索引也叫非聚簇索引、非聚集索引、二级索引等。辅助索引跟聚簇索引的区别在于，聚簇索引叶子节点中保存了完整的行数据，而辅助索引叶子节点中保存的是聚簇索引中的索引键值。
  辅助索引的存在不影响数据在聚簇索引中的组织，因此每张表中可以有多个辅助索引。



![img](https://imgconvert.csdnimg.cn/aHR0cHM6Ly9pbWcyMDE4LmNuYmxvZ3MuY29tL2Jsb2cvODQyNTE0LzIwMTkwNy84NDI1MTQtMjAxOTA3MjYyMTA3MjU4NjctMTEzMDQ5NTA0NS5wbmc?x-oss-process=image/format,png)























