---
title: "复制链表"
date: 2021-08-17T13:48:22+08:00
draft: false
author: LYR
---

请实现一个函数可以复制一个复杂链表。

在复杂链表中，每个结点除了有一个指针指向下一个结点外，还有一个额外的指针指向链表中的任意结点或者null。

**注意**：

- 函数结束后原链表要与输入时保持一致。



## 解题思路

形如 $1->2->3->4$ 的节点，我们可以利用 next 指针来指向复制节点，例如：

$1->1_{copy}->2->2_{copy}->3->3_{copy}->4->4_{copy}$

然后再断掉链条就可以了





## 解题代码





```cpp
/**
 * Definition for singly-linked list with a random pointer.
 * struct ListNode {
 *     int val;
 *     ListNode *next, *random;
 *     ListNode(int x) : val(x), next(NULL), random(NULL) {}
 * };
 */
class Solution {
public:
    ListNode *copyRandomList(ListNode *head) {
        #define Node ListNode
        auto p = head;
        if(p ==NULL) return NULL;
        while(true) {
            if(p==NULL) break;
            auto next = p->next;
            ListNode* p_copy = new Node(p->val);
            p->next = p_copy;
            p_copy->next = next;
            p = next;
        }
        p = head;
        while(true) {
            if(p==NULL) break;
            if(p->random) {
                p->next->random = p->random->next;
            }
            p = p->next->next;
        }
        
        p = head;
        Node fake(-1);
        Node* q= &fake;
        while(true) {
            if(p==NULL) break;
            q->next = p->next;
            q = q->next;
            p ->next = p->next->next;
            p = p->next;
            
        }
        
        
        return fake.next;
        
        
    }
};

```

