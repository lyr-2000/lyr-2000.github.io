---
title: "leetcode.329.矩阵中的最长递增路径"
date: 2021-08-14T22:42:48+08:00
draft: true
---



### [329\. 矩阵中的最长递增路径](https://leetcode-cn.com/problems/longest-increasing-path-in-a-matrix/)

Difficulty: **困难**


给定一个 `m x n` 整数矩阵 `matrix` ，找出其中 **最长递增路径** 的长度。

对于每个单元格，你可以往上，下，左，右四个方向移动。 你 **不能** 在 **对角线** 方向上移动或移动到 **边界外**（即不允许环绕）。

**示例 1：**

![](https://assets.leetcode.com/uploads/2021/01/05/grid1.jpg)

```
输入：matrix = [[9,9,4],[6,6,8],[2,1,1]]
输出：4 
解释：最长递增路径为 [1, 2, 6, 9]。
```

**示例 2：**

![](https://assets.leetcode.com/uploads/2021/01/27/tmp-grid.jpg)

```
输入：matrix = [[3,4,5],[3,2,6],[2,2,1]]
输出：4 
解释：最长递增路径是 [3, 4, 5, 6]。注意不允许在对角线方向上移动。
```

**示例 3：**

```
输入：matrix = [[1]]
输出：1
```

**提示：**

*   `m == matrix.length`
*   `n == matrix[i].length`
*   `1 <= m, n <= 200`
*   `0 <= matrix[i][j] <= 2<sup>31</sup> - 1`

#### 解题思路

记忆化搜索统计 每个点 出发会得到什么结果



#### Solution

Language: ****

```cpp
const int  MAXN = 250;
int dx[] = {-1,1,0,0};
int dy[] = {0,0,-1,1};
#define err(x,y) (x<0 || y<0 || x>= matrix.size() || y>=matrix[0].size())
class Solution {
public:
    int dp[MAXN][MAXN];
    int longestIncreasingPath(vector<vector<int>>& matrix) {
        if(matrix.size() == 0 ||matrix[0].size() == 0) return 0;
        memset(dp,-1,sizeof dp);
        int res=1;
        for(int i=0;i<matrix.size();++i) {
            for(int j=0;j<matrix[0].size();++j) {
                res = max(res, dfs(i,j,matrix));
            }
        }
        return res;
    }


    int dfs(int x,int y,vector<vector<int>>& matrix) {
        if(err(x,y) ) return 0;
        if(dp[x][y]>=0) return dp[x][y];
        dp[x][y] = 1;
        int res = 1;
        for(int i=0;i<4;++i) {
            int nx  = x + dx[i],
                ny = y + dy[i];
            if(err(nx,ny) == false && matrix[nx][ny] > matrix[x][y]) {
                res = max(res, 1 + dfs(nx,ny,matrix));
            }
        }
        dp[x][y] = res;
        return res;


    }
};
```

