埋点请求是为了更好地获取数据，通过数据实现前端监控，实现前端监控的目的是，通过数据反映用户行为，通过用户行为分析来优化产品方向

那么首先，我们要了解一下前端监控
# 前端监控
## 数据监控
数据监控，就是用来监控用户行为  
一般情况下，我们需要监控的用户行为有以下几种
* PV/UV：
    * PV(page view)：页面浏览量或页面点击次数
    * UV(user view)：指访问一个页面或某个地址的人数，这个人数和上面的次数是不一样的，同一个人访问多次UV也只加1
* 用户从哪里进入当前页面
* 用户在页面中停留的时间
* 用户在页面中进行的操作

## 性能监控
性能监控，就是用来监控页面一些加载，请求，渲染或者动画等这些的消耗时间，一般可以直接使用performance来监控  
一般情况下，我们需要去监控比较的性能有
* 不同用户，不同机型，不同系统的首屏加载时间
* 白屏时间
* http请求的时间
* 静态资源下载时间
* 页面渲染时间
* 页面动画渲染时间

## 异常监控
异常监控，就是用来监控异常的，在前端，异常通常发生在JavaScript中，在执行脚本的时候发生了异常，通常可以使用try-catch来捕获异常，通过在控制台输出相应内容提示异常，同样也可以将这个异常发送到服务端存储做为统计数据，但是像内存泄漏等一些异常比较难被监控到，常见的异常监控有
* JavaScript的异常监控
* 样式丢失的异常监控

## 分类
### 1. 代码埋点
代码埋点，是通过当用户去触发某个事件或者进行某个操作的时候，在这个操作的相应代码里面添加相应的“统计”代码，即以某种形式将用户进行过这个行为这件事记录下来，可以直接向服务端发送请求保存该行为记录。比如上面说到的PV/UV，在我们进入页面的时候，就告诉服务端，又有一个人（PV不需要判断这个人是否进来过，UV需要）进入当前页面了

* 优点：可以对任何操作进行监控，只要在操作里面添加相应的“记录”代码即可
* 缺点：工作量大，每个我们要监控的行为，都要手动添加相应的监控代码
### 2. 可视化埋点
通过设计一个可视化页面，对部分业务代码进行埋点监控，在开发时将业务代码和埋点代码分离，在打包的时候将业务代码和埋点代码耦合，实际上和代码埋点是一样的，只是提供了一个可视化界面提供操作。
* 优点：相对于代码埋点来说，埋点操作更为清晰，而且可采用可视化的方式来操作
* 缺点：只能对部分操作进行埋点操作，而且难以去修改具体的操作，不能手动定制

### 3. 无痕埋点
无痕埋点实际上是一个全部埋点，对前端的事件绑定和请求发起都进行一个埋点。直接通过js代码中的绑定事件，请求，来进行统计，将数据存储到一个文件中，定期上传文件内容。甚至我们可以直接存储在localStorage中，定期上传。

* 优点：对所有的操作都能进行埋点记录，不会漏埋
* 缺点：对所有的操作都进行了埋点，会增大对服务器的压力
