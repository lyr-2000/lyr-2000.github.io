## http各版本之间的比较

### http1.0

- http1.0无法复用连接，数据传输完成后就会断开，如果需要重新发送数据需要重新建立连接，又涉及到TCP的**慢启动**和**三次握手**（连接无法复用）
- head of line blocking: **线头阻塞**，如果第一个请求因为服务器正在忙，导致后面的请求被阻塞

### http1.1

- 默认使用带流水线的长链接（`Connection: Keep-Alive`），流水线就是TCP连接上可以发多个http请求和响应

- host域

  - 一个服务器可能有多个虚拟主机，并且他们是共享一个ip地址的
  - http1.0默认一个ip地址属于一个主机
  - http1.1改进后可以指定共享同一个IP地址中的某一台主机

  - 缓存

- 缓存机制

  - 强缓存

    - 缓存头`cache-control`
      - `no-cache`强制要求缓存把请求提交给原始服务器进行验证，状态码304就是这个
      - `max-age`缓存存储的最大周期
    - `Pragma` 是http1.0使用的字段，http1.1更多的适用`cache-control`，MDN也不建议使用`pragma`
    - `Expires`包含 日期/时间， 即在此时候之后，响应过期，如果`cache-control`设置了`max-age`，那么`Expires`会被忽略

  - 协商缓存

    - `ETags`缓存的一种强校验器

      服务端通过某种算法（比如 MD5）计算出该资源的唯一标致符，在响应资源的时候，将会添加在实体首部字段连同资源一并返回给客户端，客户端下次再带上这个标识请求资源，如果和服务端一致返回304，不一致返回最新资源

    - `Last-Modified`

      这个字段表示**最后修改时间**，是指请求的资源的最后修改时间，在浏览器第二次访问服务器时，会在Request Headers的**If-Modified-Since**中带上该字段的值（值来自服务器），服务器接到请求后，会对**If-Modified-Since**的值与该**请求资源的最后修改时间**进行对比，若**请求的资源最后修改时间**大于**If-Modified-Since**的值，则返回新的资源，并重新设置**Last-Modified**字段的值。

### http2.0

- 多路复用
  - 帧和流
  - 每个帧会标识出该帧属于哪个流
  - 可以发送多个请求，通过帧标识，来知道是属于哪个请求的
  - 可以避免**线头阻塞**问题
- 二进制分帧层: 应用层和传输层之间
- 首部压缩
- 服务端推送
  - 当一个客户端请求资源X，而服务器知道它很可能也需要资源Z的情况下，服务器可以在客户端发送请求前，主动将资源Z推送给客户端。	