<!DOCTYPE html>
<html lang="zh-cn">
<head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
  <title>å¤šçº¿ç¨‹ - Even - A super concise theme for Hugo</title>
  <meta name="renderer" content="webkit" />
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"/>

<meta http-equiv="Cache-Control" content="no-transform" />
<meta http-equiv="Cache-Control" content="no-siteapp" />

<meta name="theme-color" content="#f8f5ec" />
<meta name="msapplication-navbutton-color" content="#f8f5ec">
<meta name="apple-mobile-web-app-capable" content="yes">
<meta name="apple-mobile-web-app-status-bar-style" content="#f8f5ec">


<meta name="author" content="LYR" /><meta name="description" content="å¤šçº¿ç¨‹ [TOC] ä¸€. è¿›ç¨‹å’Œçº¿ç¨‹ è¿›ç¨‹ è¿›ç¨‹æ˜¯ èµ„æºåˆ†é… çš„åŸºæœ¬å•ä½ è¿›ç¨‹ä¸ç›´æ¥æ‰§è¡Œ, è€Œåªæ˜¯è·å¾—åˆ†é…è®¡ç®—æœºçš„ç›¸å…³èµ„æº çº¿ç¨‹ çº¿ç¨‹æ˜¯ ç‹¬ç«‹è°ƒåº¦ çš„åŸºæœ¬å•ä½ è€Œçº¿ç¨‹æ˜¯åœ¨è¿›ç¨‹çš„" /><meta name="keywords" content="LYRçš„æ–‡æ¡£ç«™, LYRçš„ä¸ªäººåšå®¢, even" />






<meta name="generator" content="Hugo 0.86.0 with theme even" />


<link rel="canonical" href="http://doc.lyr-2000.xyz/post/10.%E6%A0%A1%E6%8B%9B%E7%AC%94%E8%AE%B0/java/%E5%B9%B6%E5%8F%91/%E5%A4%9A%E7%BA%BF%E7%A8%8B/" />
<link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png">
<link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png">
<link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png">
<link rel="manifest" href="/manifest.json">
<link rel="mask-icon" href="/safari-pinned-tab.svg" color="#5bbad5">



<link href="/sass/main.min.b5a744db6de49a86cadafb3b70f555ab443f83c307a483402259e94726b045ff.css" rel="stylesheet">
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fancyapps/fancybox@3.1.20/dist/jquery.fancybox.min.css" integrity="sha256-7TyXnr2YU040zfSP+rEcz29ggW4j56/ujTPwjMzyqFY=" crossorigin="anonymous">


<meta property="og:title" content="å¤šçº¿ç¨‹" />
<meta property="og:description" content="å¤šçº¿ç¨‹ [TOC] ä¸€. è¿›ç¨‹å’Œçº¿ç¨‹ è¿›ç¨‹ è¿›ç¨‹æ˜¯ èµ„æºåˆ†é… çš„åŸºæœ¬å•ä½ è¿›ç¨‹ä¸ç›´æ¥æ‰§è¡Œ, è€Œåªæ˜¯è·å¾—åˆ†é…è®¡ç®—æœºçš„ç›¸å…³èµ„æº çº¿ç¨‹ çº¿ç¨‹æ˜¯ ç‹¬ç«‹è°ƒåº¦ çš„åŸºæœ¬å•ä½ è€Œçº¿ç¨‹æ˜¯åœ¨è¿›ç¨‹çš„" />
<meta property="og:type" content="article" />
<meta property="og:url" content="http://doc.lyr-2000.xyz/post/10.%E6%A0%A1%E6%8B%9B%E7%AC%94%E8%AE%B0/java/%E5%B9%B6%E5%8F%91/%E5%A4%9A%E7%BA%BF%E7%A8%8B/" /><meta property="article:section" content="post" />
<meta property="article:published_time" content="2021-08-14T22:43:02+08:00" />
<meta property="article:modified_time" content="2021-08-14T22:43:02+08:00" />

<meta itemprop="name" content="å¤šçº¿ç¨‹">
<meta itemprop="description" content="å¤šçº¿ç¨‹ [TOC] ä¸€. è¿›ç¨‹å’Œçº¿ç¨‹ è¿›ç¨‹ è¿›ç¨‹æ˜¯ èµ„æºåˆ†é… çš„åŸºæœ¬å•ä½ è¿›ç¨‹ä¸ç›´æ¥æ‰§è¡Œ, è€Œåªæ˜¯è·å¾—åˆ†é…è®¡ç®—æœºçš„ç›¸å…³èµ„æº çº¿ç¨‹ çº¿ç¨‹æ˜¯ ç‹¬ç«‹è°ƒåº¦ çš„åŸºæœ¬å•ä½ è€Œçº¿ç¨‹æ˜¯åœ¨è¿›ç¨‹çš„"><meta itemprop="datePublished" content="2021-08-14T22:43:02+08:00" />
<meta itemprop="dateModified" content="2021-08-14T22:43:02+08:00" />
<meta itemprop="wordCount" content="3501">
<meta itemprop="keywords" content="" /><meta name="twitter:card" content="summary"/>
<meta name="twitter:title" content="å¤šçº¿ç¨‹"/>
<meta name="twitter:description" content="å¤šçº¿ç¨‹ [TOC] ä¸€. è¿›ç¨‹å’Œçº¿ç¨‹ è¿›ç¨‹ è¿›ç¨‹æ˜¯ èµ„æºåˆ†é… çš„åŸºæœ¬å•ä½ è¿›ç¨‹ä¸ç›´æ¥æ‰§è¡Œ, è€Œåªæ˜¯è·å¾—åˆ†é…è®¡ç®—æœºçš„ç›¸å…³èµ„æº çº¿ç¨‹ çº¿ç¨‹æ˜¯ ç‹¬ç«‹è°ƒåº¦ çš„åŸºæœ¬å•ä½ è€Œçº¿ç¨‹æ˜¯åœ¨è¿›ç¨‹çš„"/>

<!--[if lte IE 9]>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/classlist/1.1.20170427/classList.min.js"></script>
<![endif]-->

<!--[if lt IE 9]>
  <script src="https://cdn.jsdelivr.net/npm/html5shiv@3.7.3/dist/html5shiv.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/respond.js@1.4.2/dest/respond.min.js"></script>
<![endif]-->

</head>
<body>
  <div id="mobile-navbar" class="mobile-navbar">
  <div class="mobile-header-logo">
    <a href="/" class="logo">LYRçš„æ–‡æ¡£ç«™</a>
  </div>
  <div class="mobile-navbar-icon">
    <span></span>
    <span></span>
    <span></span>
  </div>
</div>
<nav id="mobile-menu" class="mobile-menu slideout-menu">
  <ul class="mobile-menu-list">
    <a href="/">
        <li class="mobile-menu-item">é¦–é¡µ</li>
      </a><a href="/post/">
        <li class="mobile-menu-item">å½’æ¡£é¡µ</li>
      </a><a href="/tags/">
        <li class="mobile-menu-item">æ ‡ç­¾</li>
      </a><a href="/categories/">
        <li class="mobile-menu-item">åˆ†ç±»</li>
      </a><a href="/about/">
        <li class="mobile-menu-item">å…³äº</li>
      </a><a href="/friends">
        <li class="mobile-menu-item">å¤§ä½¬</li>
      </a>
  </ul>

  


</nav>

  <div class="container" id="mobile-panel">
    <header id="header" class="header">
        <div class="logo-wrapper">
  <a href="/" class="logo">LYRçš„æ–‡æ¡£ç«™</a>
</div>





<nav class="site-navbar">
  <ul id="menu" class="menu">
    <li class="menu-item">
        <a class="menu-item-link" href="/">é¦–é¡µ</a>
      </li><li class="menu-item">
        <a class="menu-item-link" href="/post/">å½’æ¡£é¡µ</a>
      </li><li class="menu-item">
        <a class="menu-item-link" href="/tags/">æ ‡ç­¾</a>
      </li><li class="menu-item">
        <a class="menu-item-link" href="/categories/">åˆ†ç±»</a>
      </li><li class="menu-item">
        <a class="menu-item-link" href="/about/">å…³äº</a>
      </li><li class="menu-item">
        <a class="menu-item-link" href="/friends">å¤§ä½¬</a>
      </li>
  </ul>
</nav>

    </header>

    <main id="main" class="main">
      <div class="content-wrapper">
        <div id="content" class="content">
          <article class="post">
    
    <header class="post-header">
      <h1 class="post-title">å¤šçº¿ç¨‹</h1>

      <div class="post-meta">
        <span class="post-time"> 2021-08-14 </span>
        
        
      </div>
    </header>

    <div class="post-toc" id="post-toc">
  <h2 class="post-toc-title">æ–‡ç« ç›®å½•</h2>
  <div class="post-toc-content">
    <nav id="TableOfContents">
  <ul>
    <li><a href="#å¤šçº¿ç¨‹">å¤šçº¿ç¨‹</a>
      <ul>
        <li><a href="#ä¸€-è¿›ç¨‹å’Œçº¿ç¨‹">ä¸€. è¿›ç¨‹å’Œçº¿ç¨‹</a>
          <ul>
            <li><a href="#è¿›ç¨‹">è¿›ç¨‹</a></li>
            <li><a href="#çº¿ç¨‹">çº¿ç¨‹</a></li>
          </ul>
        </li>
        <li><a href="#äºŒ-ä½¿ç”¨çº¿ç¨‹">äºŒ. ä½¿ç”¨çº¿ç¨‹</a>
          <ul>
            <li><a href="#åˆ›å»º-å¹¶-å¯åŠ¨çº¿ç¨‹">åˆ›å»º å¹¶ å¯åŠ¨çº¿ç¨‹</a></li>
            <li><a href="#çº¿ç¨‹åç§°">çº¿ç¨‹åç§°</a></li>
          </ul>
        </li>
        <li><a href="#ä¸‰-çº¿ç¨‹è¿è¡ŒçŠ¶æ€">ä¸‰. çº¿ç¨‹è¿è¡ŒçŠ¶æ€</a>
          <ul>
            <li><a href="#æ–°å»º-new">æ–°å»º New</a></li>
            <li><a href="#å¯è¿è¡Œæ€-runnable">å¯è¿è¡Œæ€ Runnable</a></li>
            <li><a href="#é˜»å¡-blocked">é˜»å¡ (Blocked)</a></li>
            <li><a href="#æ— é™ç­‰å¾…çŠ¶æ€-waiting">æ— é™ç­‰å¾…çŠ¶æ€ (Waiting)</a></li>
            <li><a href="#é™æœŸç­‰å¾…-timed-waiting">é™æœŸç­‰å¾… (Timed Waiting)</a></li>
            <li><a href="#æ­»äº¡-terminated">æ­»äº¡ (Terminated)</a></li>
          </ul>
        </li>
        <li><a href="#å››-å–ç¥¨é—®é¢˜">å››. å–ç¥¨é—®é¢˜</a></li>
        <li><a href="#äº”-çº¿ç¨‹å®‰å…¨">äº”. çº¿ç¨‹å®‰å…¨</a>
          <ul>
            <li><a href="#äº§ç”Ÿå®‰å…¨é—®é¢˜å‰æ">äº§ç”Ÿå®‰å…¨é—®é¢˜å‰æ</a></li>
            <li><a href="#è¿›ç¨‹åŒæ­¥-synchronized">è¿›ç¨‹åŒæ­¥ (synchronized)</a></li>
            <li><a href="#åŒæ­¥å¼Šç«¯">åŒæ­¥å¼Šç«¯</a></li>
            <li><a href="#å¤šçº¿ç¨‹ä¸‹å•ä¾‹è®¾è®¡æ¨¡å¼çš„å®‰å…¨éšæ‚£">å¤šçº¿ç¨‹ä¸‹å•ä¾‹è®¾è®¡æ¨¡å¼çš„å®‰å…¨éšæ‚£</a></li>
          </ul>
        </li>
        <li><a href="#å…­-çº¿ç¨‹ä¹‹é—´çš„åä½œ">å…­. çº¿ç¨‹ä¹‹é—´çš„åä½œ</a></li>
      </ul>
    </li>
  </ul>
</nav>
  </div>
</div>
    <div class="post-content">
      <h1 id="å¤šçº¿ç¨‹">å¤šçº¿ç¨‹</h1>
<p>[TOC]</p>
<h2 id="ä¸€-è¿›ç¨‹å’Œçº¿ç¨‹">ä¸€. è¿›ç¨‹å’Œçº¿ç¨‹</h2>
<h3 id="è¿›ç¨‹">è¿›ç¨‹</h3>
<p>è¿›ç¨‹æ˜¯ <strong>èµ„æºåˆ†é…</strong> çš„åŸºæœ¬å•ä½</p>
<p>è¿›ç¨‹ä¸ç›´æ¥æ‰§è¡Œ, è€Œåªæ˜¯è·å¾—åˆ†é…è®¡ç®—æœºçš„ç›¸å…³èµ„æº</p>
<h3 id="çº¿ç¨‹">çº¿ç¨‹</h3>
<p>çº¿ç¨‹æ˜¯ <strong>ç‹¬ç«‹è°ƒåº¦</strong> çš„åŸºæœ¬å•ä½</p>
<p>è€Œçº¿ç¨‹æ˜¯åœ¨è¿›ç¨‹çš„èµ„æºä¸Šè¿›è¡Œç›´æ¥æ‰§è¡Œçš„ä¸€ä¸ªåŸºæœ¬æ§åˆ¶å•å…ƒ, ä¹Ÿå¯ä»¥è¢«ç§°ä¸º <strong>æ‰§è¡Œæƒ…æ™¯</strong>, <strong>æ‰§è¡Œè·¯å¾„</strong></p>
<p>ä¸€ä¸ªè¿›ç¨‹è‡³å°‘éœ€è¦åŒ…æ‹¬ä¸€ä¸ªçº¿ç¨‹, ä¹Ÿå¯ä»¥åŒ…æ‹¬å¤šä¸ªçº¿ç¨‹, å³å¤šä¸ªæ‰§è¡Œè·¯å¾„. ä¸”å¤šä¸ªæ‰§è¡Œè·¯å¾„å¯ä»¥<strong>å¹¶å‘æ‰§è¡Œ</strong></p>
<p><img src="https://camo.githubusercontent.com/a66819fd82c6adfa69b368edf3c52b1fa9cdc89d/68747470733a2f2f6d792d626c6f672d746f2d7573652e6f73732d636e2d6265696a696e672e616c6979756e63732e636f6d2f323031392d332f4a564de8bf90e8a18ce697b6e695b0e68daee58cbae59f9f2e706e67" alt="img"></p>
<ul>
<li>ä¸€ä¸ªè¿›ç¨‹å¯ä»¥æœ‰å¤šä¸ªçº¿ç¨‹</li>
<li>å¤šä¸ªçº¿ç¨‹å¯ä»¥å…±äº«è¿›ç¨‹çš„ <strong>æ–¹æ³•åŒº</strong> , <strong>å †åŒº</strong></li>
<li>æ¯ä¸ªçº¿ç¨‹æœ‰è‡ªå·±ç§æœ‰çš„ <strong>VM æ ˆ</strong> , <strong>æœ¬åœ°æ–¹æ³•æ ˆ</strong>, <strong>PC</strong></li>
</ul>
<p><strong>æ€»ç»“ï¼š</strong> çº¿ç¨‹ æ˜¯ è¿›ç¨‹ åˆ’åˆ†æˆçš„æ›´å°çš„è¿è¡Œå•ä½ã€‚çº¿ç¨‹å’Œè¿›ç¨‹æœ€å¤§çš„ä¸åŒåœ¨äºåŸºæœ¬ä¸Šå„è¿›ç¨‹æ˜¯ <strong>ç‹¬ç«‹</strong> çš„ï¼Œè€Œå„çº¿ç¨‹åˆ™ä¸ä¸€å®šï¼Œå› ä¸ºåŒä¸€è¿›ç¨‹ä¸­çš„çº¿ç¨‹ææœ‰å¯èƒ½ä¼šç›¸äº’å½±å“ã€‚çº¿ç¨‹æ‰§è¡Œå¼€é”€å°ï¼Œä½†ä¸åˆ©äºèµ„æºçš„ç®¡ç†å’Œä¿æŠ¤ï¼›è€Œè¿›ç¨‹æ­£ç›¸å</p>
<ul>
<li>è¿›ç¨‹èµ„æºç‹¬ç«‹æ˜“ä¿æŠ¤</li>
<li>çº¿ç¨‹å…±äº«å¼€é”€å°, éš¾ç»´æŠ¤</li>
</ul>
<h2 id="äºŒ-ä½¿ç”¨çº¿ç¨‹">äºŒ. ä½¿ç”¨çº¿ç¨‹</h2>
<h3 id="åˆ›å»º-å¹¶-å¯åŠ¨çº¿ç¨‹">åˆ›å»º å¹¶ å¯åŠ¨çº¿ç¨‹</h3>
<p>åœ¨javaä¸­ä½¿ç”¨ä¸€ä¸ªçº¿ç¨‹å…±æœ‰å¦‚ä¸‹ä¸‰ç§æ–¹æ³• :</p>
<ul>
<li>å®ç° Runnable æ¥å£</li>
<li>å®ç° Callable æ¥å£</li>
<li>ç»§æ‰¿ Thread ç±»</li>
</ul>
<p>å®ç° Runnable å’Œ Callable æ¥å£çš„ç±»åªèƒ½å½“åšä¸€ä¸ªå¯ä»¥åœ¨çº¿ç¨‹ä¸­è¿è¡Œçš„ä»»åŠ¡ï¼Œä¸æ˜¯çœŸæ­£æ„ä¹‰ä¸Šçš„çº¿ç¨‹ï¼Œå› æ­¤æœ€åè¿˜éœ€è¦é€šè¿‡ Thread æ¥è°ƒç”¨ã€‚å¯ä»¥è¯´ä»»åŠ¡æ˜¯é€šè¿‡çº¿ç¨‹é©±åŠ¨ä»è€Œæ‰§è¡Œçš„ã€‚</p>
<h4 id="ç»§æ‰¿-thread-ç±»çš„æ–¹å¼ä½¿ç”¨çº¿ç¨‹">ç»§æ‰¿ Thread ç±»çš„æ–¹å¼ä½¿ç”¨çº¿ç¨‹</h4>
<p>å…¶å® Thread ç±»ä¹Ÿæ˜¯ Runnable çš„ä¸€ä¸ª Impls</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-java" data-lang="java"><span class="kd">class</span> <span class="nc">Thread</span> <span class="kd">extends</span> <span class="n">object</span> <span class="kd">implements</span> <span class="n">Runnable</span><span class="o">{}</span>
</code></pre></td></tr></table>
</div>
</div><hr>
<p>ç¬¬ä¸€æ­¥ : å®šä¹‰ä¸€ä¸ªç±»ç»§æ‰¿ Tread ç±»:</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-java" data-lang="java"><span class="cm">/*
</span><span class="cm">	java æ ¸å¿ƒè¯­è¨€åŒ… lang ä¸­å°è£…äº† thread ç±»
</span><span class="cm">	è¿™ä¸ªç±»å¯ä»¥å¸®åŠ©æˆ‘ä»¬å¼€å¯ä¸€ä¸ªæ–°çš„çº¿ç¨‹
</span><span class="cm">	
</span><span class="cm">*/</span>
<span class="kd">class</span> <span class="nc">MyThread</span> <span class="kd">extends</span> <span class="n">Thread</span><span class="o">{</span>
    <span class="c1">// code ..
</span><span class="c1"></span><span class="o">}</span>    
<span class="cm">/*
</span><span class="cm">	ä½¿ç”¨æ—¶, æˆ‘ä»¬ç›´æ¥å®ä¾‹åŒ–è¿™ä¸ªç±», å†è°ƒç”¨ä¸‹é¢ä»‹ç»çš„æ–¹æ³•å³å¯
</span><span class="cm">*/</span>
</code></pre></td></tr></table>
</div>
</div><hr>
<p>ç¬¬äºŒæ­¥ : <strong>è¦†ç›–</strong> Thread ç±»ä¸­çš„ run æ–¹æ³•</p>
<p>å®šä¹‰ä¸€ä¸ªæ–°çš„çº¿ç¨‹çš„ç›®çš„å°±æ˜¯ä¸ºäº† : è®©çº¿ç¨‹å»å¸®åŠ©æˆ‘ä»¬çš„å¹¶è¡Œçš„è¿è¡Œè®¡ç®—ä¸€äº›ä»»åŠ¡</p>
<p>Thread ç±»é‡Œé¢æä¾›äº† ä¸€ä¸ªæ–¹æ³• run()</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-java" data-lang="java"><span class="cm">/*
</span><span class="cm">	run() æ–¹æ³•
</span><span class="cm">	æˆ‘ä»¬éœ€è¦åœ¨å­ç±»é‡Œé¢é‡å†™è¿™ä¸ª run æ–¹æ³•, ä»è€Œå®ç°æˆ‘ä»¬è‡ªå®šä¹‰åŠŸèƒ½çš„ç›®çš„
</span><span class="cm">*/</span>
<span class="kd">class</span> <span class="nc">MyThread</span> <span class="kd">extends</span> <span class="n">Thread</span><span class="o">{</span>
    
    <span class="kd">public</span> <span class="kt">void</span> <span class="nf">run</span><span class="o">(){</span>
        <span class="c1">// your function here
</span><span class="c1"></span>    <span class="o">}</span>
    
    <span class="cm">/*
</span><span class="cm">     ç‰¹åˆ«æ³¨æ„, çˆ¶ç±»çš„runæ–¹æ³• å‚æ•°åˆ—è¡¨ä¸ºç©º
</span><span class="cm">     æ‰€ä»¥æˆ‘ä»¬é‡å†™(è¦†ç›–)çš„æ—¶å€™, ä¸è¦æ·»åŠ æ–°çš„å‚æ•°åˆ—è¡¨
</span><span class="cm">     å¦åˆ™ ä¾¿æ˜¯ä¸€ä¸ªæ–°çš„runæ–¹æ³•, è€Œä¸æ˜¯é‡å†™äº†
</span><span class="cm">     
</span><span class="cm">     âŒ
</span><span class="cm">     public void run(int i){
</span><span class="cm">
</span><span class="cm">      }
</span><span class="cm">      
</span><span class="cm">    */</span>
<span class="o">}</span>   
</code></pre></td></tr></table>
</div>
</div><hr>
<p>ç¬¬ä¸‰æ­¥ : å¯åŠ¨çº¿ç¨‹</p>
<p>æˆ‘ä»¬å¯åŠ¨çº¿ç¨‹, åªéœ€è¦å°†å®ä¾‹åŒ–çš„å¯¹è±¡å»è°ƒç”¨ çˆ¶ç±»æ–¹æ³• start å³å¯.</p>
<p>æ³¨æ„, å¤šæ¬¡å¯ç”¨ä¸€ä¸ªçº¿ç¨‹æ˜¯éæ³•çš„ !!!</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-java" data-lang="java"><span class="kd">public</span> <span class="kd">static</span> <span class="kt">void</span> <span class="nf">main</span><span class="o">(</span><span class="n">String</span> <span class="n">args</span><span class="o">[]){</span>
    
    <span class="n">MyThread</span> <span class="n">t1</span> <span class="o">=</span> <span class="k">new</span> <span class="n">MyThread</span><span class="o">();</span>
    
    <span class="cm">/*
</span><span class="cm">    	æ³¨æ„startçš„ä½œç”¨æ˜¯ : 
</span><span class="cm">    	å¯¼è‡´æ­¤çº¿ç¨‹å¼€å§‹æ‰§è¡Œ; Javaè™šæ‹Ÿæœºè°ƒç”¨æ­¤çº¿ç¨‹çš„runæ–¹æ³•ã€‚
</span><span class="cm">    */</span>
    <span class="n">t1</span><span class="o">.</span><span class="na">start</span><span class="o">()</span>
        
    <span class="c1">// å¤šæ¬¡å¯ç”¨ä¸€ä¸ªçº¿ç¨‹æ˜¯éæ³•çš„ âŒ
</span><span class="c1"></span>	<span class="c1">// æ³¨æ„æ¬¡ç§æƒ…å†µä¼šæŠ›å‡ºå¼‚å¸¸ (ä¸»çº¿ç¨‹ç§æŠ›å‡ºçš„!!!!) 
</span><span class="c1"></span>    <span class="c1">// t1.start()
</span><span class="c1"></span>        
    <span class="cm">/*
</span><span class="cm">    	å¦‚æœæˆ‘ä»¬ç›´æ¥ä»¥æˆå‘˜æ–¹æ³•çš„å½¢å¼è°ƒç”¨ run, é‚£ä¹ˆç»“æœå¹¶ä¸ä¼šä»¥å¤šçº¿ç¨‹çš„å½¢å¼è¡¨ç°
</span><span class="cm">    	å’Œæ™®é€šçš„å¯¹è±¡æ–¹æ³•è°ƒç”¨æ— å¼‚
</span><span class="cm">    */</span>
    <span class="n">t1</span><span class="o">.</span><span class="na">run</span><span class="o">()</span>
<span class="o">}</span>
</code></pre></td></tr></table>
</div>
</div><h4 id="-å®ç°-runnable-æ¥å£çš„æ–¹å¼ä½¿ç”¨çº¿ç¨‹">ğŸŒŸ å®ç° Runnable æ¥å£çš„æ–¹å¼ä½¿ç”¨çº¿ç¨‹</h4>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-java" data-lang="java"><span class="cm">/*
</span><span class="cm">	æˆ‘ä»¬å¯ä»¥è®©ä¸€ä¸ªç±»ç»§æ‰¿ä¸€ä¸ª Runnable æ¥å£
</span><span class="cm">	ç„¶ååœ¨æ–°ç±»ä¸­å®ç° Runnable çš„ runæ–¹æ³•å³å¯
</span><span class="cm">*/</span>
<span class="kd">public</span> <span class="kd">class</span> <span class="nc">MyThread</span> <span class="kd">implements</span> <span class="n">Runnable</span><span class="o">{</span>
    <span class="kd">public</span> <span class="n">viod</span> <span class="nf">run</span><span class="o">(){</span>
        <span class="c1">// code ...
</span><span class="c1"></span>    <span class="o">}</span>
<span class="o">}</span>

<span class="c1">// ä¸»ç¨‹åºä¸­ç”¨è°ƒç”¨
</span><span class="c1"></span><span class="kd">public</span> <span class="kd">static</span> <span class="kt">void</span> <span class="nf">main</span><span class="o">(</span><span class="n">String</span><span class="o">[]</span> <span class="n">args</span><span class="o">){</span>
    
    <span class="c1">// å…ˆå£°æ˜ä¸€ä¸ªæˆ‘ä»¬çš„å¯¹è±¡
</span><span class="c1"></span>    <span class="n">MyThread</span> <span class="n">mt</span> <span class="o">=</span> <span class="k">new</span> <span class="n">MyThread</span><span class="o">();</span>
    
    <span class="c1">// ç„¶ååˆ©ç”¨ Thread çš„æ„é€ å‡½æ•°, å»å®ç°ä¸€ä¸ª runnable çš„ä¼ å‚
</span><span class="c1"></span>    <span class="n">Thread</span> <span class="n">t1</span> <span class="o">=</span> <span class="k">new</span> <span class="n">Thread</span><span class="o">(</span><span class="n">mt</span><span class="o">);</span>
    
    <span class="c1">// å†è¿›è¡Œstartçš„æ—¶å€™, è¯¥çº¿ç¨‹ä¾¿æ˜¯ç›´æ¥è°ƒç”¨çš„ mt çš„ run æ–¹æ³•
</span><span class="c1"></span>    <span class="n">t1</span><span class="o">.</span><span class="na">start</span><span class="o">();</span>
<span class="o">}</span>
</code></pre></td></tr></table>
</div>
</div><h4 id="å®ç°-callable-æ¥å£çš„æ–¹å¼ä½¿ç”¨çº¿ç¨‹">å®ç° Callable æ¥å£çš„æ–¹å¼ä½¿ç”¨çº¿ç¨‹</h4>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-java" data-lang="java"><span class="cm">/*
</span><span class="cm">
</span><span class="cm">*/</span>
<span class="kd">public</span> <span class="kd">class</span> <span class="nc">MyThread</span> <span class="kd">implements</span> <span class="n">Callable</span><span class="o">{</span>
    <span class="kd">public</span> <span class="n">viod</span> <span class="nf">run</span><span class="o">(){</span>
        <span class="c1">// code ...
</span><span class="c1"></span>    <span class="o">}</span>
<span class="o">}</span>

<span class="c1">// ä¸»ç¨‹åºä¸­ç”¨ 
</span></code></pre></td></tr></table>
</div>
</div><h4 id="å®ç°æ¥å£-vs-ç»§æ‰¿-thread">å®ç°æ¥å£ VS ç»§æ‰¿ Thread</h4>
<p>ğŸŒŸ å®ç°æ¥å£çš„æ–¹æ³•æ›´å¥½, å› ä¸º :</p>
<ul>
<li>Java ä¸æ”¯æŒå¤šé‡ç»§æ‰¿ï¼Œå› æ­¤ç»§æ‰¿äº† Thread ç±»å°±æ— æ³•ç»§æ‰¿å…¶å®ƒç±»ï¼Œä½†æ˜¯å¯ä»¥å®ç°å¤šä¸ªæ¥å£</li>
<li>ç±»å¯èƒ½åªè¦æ±‚å¯æ‰§è¡Œå°±è¡Œï¼Œ<strong>ç»§æ‰¿æ•´ä¸ª Thread ç±»å¼€é”€è¿‡å¤§</strong></li>
</ul>
<h3 id="çº¿ç¨‹åç§°">çº¿ç¨‹åç§°</h3>
<p>æŸ¥çœ‹ä¸€ä¸ª <strong>çº¿ç¨‹çš„åç§°(å­—ç¬¦ä¸²)</strong> çš„æ–¹æ³• :</p>
<p>æ³¨æ„è¿™ä¸ªçº¿ç¨‹ç±»ä¸ä¸€å®šè¢«å¼€å¯äº†.</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-java" data-lang="java"><span class="cm">/*
</span><span class="cm">	getName() æ–¹æ³•
</span><span class="cm">	çº¿ç¨‹åç§°æ˜¯ä¸€ä¸ªå­—ç¬¦ä¸²å¯ä»¥åœ¨æ„é€ å‡½æ•°ä¼ é€’
</span><span class="cm">    * å¦‚æœåœ¨æ„é€ å‡½æ•°ä¼ é€’äº†è‡ªå®šä¹‰å­—ç¬¦ä¸², åˆ™çº¿ç¨‹è¢«å‘½åä¸ºè¯¥å­—ç¬¦ä¸²
</span><span class="cm">    * å¦‚æœæ²¡æœ‰ä¼ é€’, é‚£ä¹ˆçº¿ç¨‹è°ƒç”¨é»˜è®¤çš„å‘½å e.g. &#34;Thread-0&#34;
</span><span class="cm">*/</span>
<span class="kd">class</span> <span class="nc">MyThread</span> <span class="kd">extends</span> <span class="n">Thread</span><span class="o">{</span>
    <span class="n">MyThread</span><span class="o">(</span><span class="n">String</span> <span class="n">name</span><span class="o">){</span>
        <span class="kd">super</span><span class="o">(</span><span class="n">name</span><span class="o">)</span>
    <span class="o">}</span>
<span class="o">}</span>

<span class="kd">public</span> <span class="kd">static</span> <span class="kt">void</span> <span class="nf">main</span><span class="o">(</span><span class="n">String</span> <span class="n">args</span><span class="o">[]){</span>
    <span class="n">MyThread</span> <span class="n">t1</span> <span class="o">=</span> <span class="k">new</span> <span class="n">MyThread</span><span class="o">(</span><span class="s">&#34;FangZhou&#34;</span><span class="o">);</span>
    
    <span class="c1">// è·å¾—çº¿ç¨‹åç§°
</span><span class="c1"></span>    <span class="c1">// æ³¨æ„, è¿™ä¸ªçº¿ç¨‹çš„åç§°, æ˜¯ä¸€æ—¦å®ä¾‹åŒ–å°±è¢«åˆ†é…åˆ°çš„, ä¸ç®¡è¿™ä¸ªçº¿ç¨‹æœ‰æ²¡æœ‰å¼€å¯ (strat)
</span><span class="c1"></span>    <span class="n">t1</span><span class="o">.</span><span class="na">getName</span><span class="o">();</span>
<span class="o">}</span>

</code></pre></td></tr></table>
</div>
</div><hr>
<p>æŸ¥çœ‹ä¸€ä¸ª <strong>æ­£åœ¨è¿è¡Œ(å·²ç»è¢«å¼€å¯)</strong> çš„çº¿ç¨‹ç±»çš„åç§°:</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-java" data-lang="java"><span class="cm">/*
</span><span class="cm">	currentThread() æ–¹æ³•
</span><span class="cm">	è¿™ä¸ªæ˜¯ä¸€ä¸ªé™æ€çš„æ–¹æ³•, å¯ä»¥è¿”å›å½“å‰æ­£åœ¨è¿è¡Œçš„çº¿ç¨‹çš„å¯¹è±¡å¼•ç”¨
</span><span class="cm">*/</span>
<span class="kd">class</span> <span class="nc">MyThread</span> <span class="kd">extends</span> <span class="n">Thread</span><span class="o">{</span>
    <span class="kd">public</span> <span class="kt">void</span> <span class="nf">run</span><span class="o">(){</span>
        <span class="c1">// code...
</span><span class="c1"></span>    <span class="o">}</span>
<span class="o">}</span>

<span class="kd">public</span> <span class="kd">static</span> <span class="kt">void</span> <span class="nf">main</span><span class="o">(</span><span class="n">String</span> <span class="n">args</span><span class="o">[]){</span>
    <span class="n">MyThread</span> <span class="n">t1</span> <span class="o">=</span> <span class="k">new</span> <span class="n">MyThread</span><span class="o">(</span><span class="s">&#34;FangZhou&#34;</span><span class="o">);</span>
    
    <span class="c1">// æ‰“å°å‡º main
</span><span class="c1"></span>	<span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">Thread</span><span class="o">.</span><span class="na">currentThread</span><span class="o">().</span><span class="na">getName</span><span class="o">());</span>
<span class="o">}</span>
</code></pre></td></tr></table>
</div>
</div><h2 id="ä¸‰-çº¿ç¨‹è¿è¡ŒçŠ¶æ€">ä¸‰. çº¿ç¨‹è¿è¡ŒçŠ¶æ€</h2>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-java" data-lang="java"><span class="cm">/*
</span><span class="cm">	runable &lt;=&gt; TimeWaiting è°ƒç”¨sleep(time)å‡½æ•°, timeè§„å®šäº†ç¡çœ æ—¶é—´, æ—¶é—´åˆ°äº†çº¿ç¨‹è‡ªåŠ¨å˜ä¸ºè¿è¡Œæ€
</span><span class="cm">	runable &lt;=&gt; waiting 
</span><span class="cm">				è°ƒç”¨ wait() å‡½æ•°, è®©çº¿ç¨‹è¿›å…¥ waiting æ€, ä¸”ä¸ä¼šè‡ªåŠ¨åˆ‡å›
</span><span class="cm">				è°ƒç”¨ notify() , è®©çº¿ç¨‹å¯ä»¥ä» waiting æ€åˆ‡å› è¿è¡Œæ€
</span><span class="cm">*/</span>
</code></pre></td></tr></table>
</div>
</div><p><img src = '/image/2019-07-20-thread-status.png' /></p>
<h3 id="æ–°å»º-new">æ–°å»º New</h3>
<p>åˆ›å»ºäº†çº¿ç¨‹åè¿˜æœªå¯åŠ¨</p>
<hr>
<h3 id="å¯è¿è¡Œæ€-runnable">å¯è¿è¡Œæ€ Runnable</h3>
<ul>
<li>å¯èƒ½æ­£åœ¨è¿è¡Œ</li>
<li>å¯èƒ½æ­£åœ¨ç­‰å¾…CPUåˆ†é…æ—¶é—´ç‰‡</li>
</ul>
<p>å¯å¯¹åº”äºCPUçš„ä¸¤ç§çº¿ç¨‹çŠ¶æ€ : Ready , Running</p>
<hr>
<h3 id="é˜»å¡-blocked">é˜»å¡ (Blocked)</h3>
<p>çº¿ç¨‹éœ€è¦ç­‰å¾…ä¸€ä¸ªç³»ç»Ÿçš„èµ„æº(e.g. I/O) è¢«é‡Šæ”¾, æ‰èƒ½ç»§ç»­çš„è¿è¡Œ</p>
<hr>
<h3 id="æ— é™ç­‰å¾…çŠ¶æ€-waiting">æ— é™ç­‰å¾…çŠ¶æ€ (Waiting)</h3>
<p>é™¤éå…¶ä»–çº¿ç¨‹æ˜¾ç¤ºçš„è¿›è¡Œå”¤é†’ (notify) , å¦åˆ™ä¸ä¼šè¢«åˆ†é…CPUçš„æ—¶é—´ç‰‡</p>
<hr>
<h3 id="é™æœŸç­‰å¾…-timed-waiting">é™æœŸç­‰å¾… (Timed Waiting)</h3>
<p>ä¸éœ€è¦è¢«æ˜¾ç¤ºçš„å”¤é†’, åœ¨ä¸€å®šæ—¶é—´è¿‡åè¢«ç³»ç»Ÿè‡ªåŠ¨å”¤é†’</p>
<hr>
<h3 id="æ­»äº¡-terminated">æ­»äº¡ (Terminated)</h3>
<p>çº¿ç¨‹æœ‰ä¸¤ç§æ–¹å¼å¯ä»¥èµ°å‘æ¶ˆäº¡ â˜ ï¸</p>
<ul>
<li>å®Œæˆä»»åŠ¡è‡ªç„¶ç»“æŸ</li>
<li>é‡åˆ°å¼‚å¸¸è€Œç»“æŸ</li>
</ul>
<hr>
<h2 id="å››-å–ç¥¨é—®é¢˜">å››. å–ç¥¨é—®é¢˜</h2>
<p>åˆ©ç”¨å®ç° runnable æ¥å£, å®ç°å¯¹ <strong>ä¸€ä¸ªå®ä¾‹åŒ–å¯¹è±¡ (Ticket)</strong> çš„å¤šçº¿ç¨‹è¿è¡Œé—®é¢˜.  <strong>ä»è€Œå®ç°å¤šä¸ªçº¿ç¨‹è¿è¡Œçš„è¿‡ç¨‹ä¸­, èµ„æºä¸ºåŒä¸€ä¸ª (å®ä¾‹åŒ–å¯¹è±¡). è€Œä¸éœ€è¦å°†çº¿ç¨‹å…±äº«çš„èµ„æºå£°æ˜ä¸ºé™æ€èµ„æº</strong></p>
<p>ä¹Ÿå°±æ˜¯è¯´, ä½¿ç”¨ <code>runnable</code>æ¥å£åªæœ‰ <code>run</code> æ–¹æ³•é‡Œé¢è¢«å¤šçº¿ç¨‹è°ƒç”¨, å±äºå„ä¸ªçº¿ç¨‹ç§æœ‰, ä½†æ˜¯è¯¥ç±»çš„æˆå‘˜å˜é‡ å¦‚ <code>ticket_num</code> ä»ç„¶æ˜¯å¤šä¸ªçº¿ç¨‹å…±æœ‰</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span><span class="lnt">26
</span><span class="lnt">27
</span><span class="lnt">28
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-java" data-lang="java"><span class="kd">class</span> <span class="nc">Ticket</span> <span class="kd">implements</span> <span class="n">Runnable</span><span class="o">{</span>
	<span class="kd">private</span> <span class="n">ticket_num</span> <span class="o">=</span> <span class="n">100</span><span class="o">;</span>
    <span class="kd">public</span> <span class="kt">void</span> <span class="nf">run</span><span class="o">(){</span>
        <span class="k">while</span><span class="o">(</span><span class="kc">true</span><span class="o">){</span>
            <span class="k">if</span><span class="o">(</span><span class="n">num</span> <span class="o">&lt;</span> <span class="n">0</span><span class="o">){</span>
                <span class="n">Sale_Ticket</span><span class="o">();</span>
            <span class="o">}</span>
        <span class="o">}</span>
    <span class="o">}</span>
<span class="o">}</span>

<span class="kd">public</span> <span class="kd">static</span> <span class="kt">void</span> <span class="nf">main</span><span class="o">(</span><span class="n">String</span><span class="o">[]</span> <span class="n">args</span><span class="o">){</span>
    <span class="n">Ticket</span> <span class="n">Tick_Impls</span> <span class="o">=</span> <span class="k">new</span> <span class="n">Ticket</span><span class="o">();</span>
    
    <span class="c1">// Runnableå¯¹è±¡ä½œä¸ºä¼ å‚æ•°çš„æ„é€ çº¿ç¨‹
</span><span class="c1"></span>	<span class="n">Thread</span> <span class="n">t1</span> <span class="o">=</span> <span class="k">new</span> <span class="n">Thread</span><span class="o">(</span><span class="n">Tick_Impls</span><span class="o">);</span>
    <span class="n">Thread</span> <span class="n">t2</span> <span class="o">=</span> <span class="k">new</span> <span class="n">Thread</span><span class="o">(</span><span class="n">Tick_Impls</span><span class="o">);</span>
    <span class="n">Thread</span> <span class="n">t3</span> <span class="o">=</span> <span class="k">new</span> <span class="n">Thread</span><span class="o">(</span><span class="n">Tick_Impls</span><span class="o">);</span>
    <span class="n">Thread</span> <span class="n">t4</span> <span class="o">=</span> <span class="k">new</span> <span class="n">Thread</span><span class="o">(</span><span class="n">Tick_Impls</span><span class="o">);</span>
    
    <span class="c1">// è¿è¡Œ
</span><span class="c1"></span>    <span class="c1">// æ­¤æ—¶ t1, t2, t3, t4 å…±äº«ä¸€ä¸ªå®ä¾‹åŒ–å¯¹è±¡çš„èµ„æº
</span><span class="c1"></span>    <span class="n">t1</span><span class="o">.</span><span class="na">start</span><span class="o">();</span>
    <span class="n">t2</span><span class="o">.</span><span class="na">start</span><span class="o">();</span>
    <span class="n">t3</span><span class="o">.</span><span class="na">start</span><span class="o">();</span>
    <span class="n">t4</span><span class="o">.</span><span class="na">start</span><span class="o">();</span>   
<span class="o">}</span>

</code></pre></td></tr></table>
</div>
</div><hr>
<p><strong>å¯èƒ½å‡ºç°çš„é—®é¢˜ :</strong></p>
<p>åœ¨å¤šçº¿ç¨‹çš„ä½¿ç”¨æ—¶, æˆ‘ä»¬å¿…é¡»å»è€ƒè™‘ä¸€ä¸‹çº¿ç¨‹çš„å®‰å…¨é—®é¢˜</p>
<p>æ¯”å¦‚è¿™ä¸ªå°ä¾‹å­, å”®å‡ºçš„ç¥¨å¯èƒ½å‡ºç°è´Ÿæ•°çš„æƒ…å†µ, ä»è€Œå¯¼è‡´ä¸¥é‡ç¾éš¾</p>
<p><img src = '/image/2019-07-20-thread-insecure.svg' /></p>
<h2 id="äº”-çº¿ç¨‹å®‰å…¨">äº”. çº¿ç¨‹å®‰å…¨</h2>
<h3 id="äº§ç”Ÿå®‰å…¨é—®é¢˜å‰æ">äº§ç”Ÿå®‰å…¨é—®é¢˜å‰æ</h3>
<p>å¤šçº¿ç¨‹å¯èƒ½äº§ç”Ÿå®‰å…¨é—®æçš„å‰æ :</p>
<ol>
<li><strong>å¤šä¸ªçº¿ç¨‹</strong> åœ¨æ“ä½œä¸€ä¸ª <strong>å…±äº«æ•°æ®</strong></li>
<li>æ“ä½œå…±äº«æ•°æ®çš„ä»£ç æœ‰ <strong>å¤šæ¡</strong> , å› ä¸ºå¦‚æœåªæœ‰ä¸€æ¡çš„è¯, ä¸€ä¸ªçº¿ç¨‹åªæœ‰åœ¨è¿™ä¸ªè¯­å¥æ‰§è¡Œå‰åæ‰å¯èƒ½å‡ºç°é˜»å¡. æ‰€ä»¥è¿˜æ˜¯å‰åä¸€è‡´çš„</li>
</ol>
<h3 id="è¿›ç¨‹åŒæ­¥-synchronized">è¿›ç¨‹åŒæ­¥ (synchronized)</h3>
<p>å°†æ“ä½œå…±äº«æ•°æ®çš„ä¸€æ®µä»£ç è§†ä¸ºä¸€ä¸ªä¸å¯åˆ†å‰²çš„æ•´ä½“, å³è®©è¿™ä¸€æ®µä»£ç å…·æœ‰åŸå­è¡Œ, ä»è€Œå½“ä¸€ä¸ªçº¿ç¨‹æ“ä½œ å…±äº«æ•°æ®çš„æ—¶å€™, è¢«çš„çº¿ç¨‹æ— æ³•è¿›å…¥ä¸´ç•ŒåŒº.</p>
<p>åŒæ­¥å…³é”®å­—, å¯ä»¥å®šä¹‰ä¸€ä¸ª :</p>
<ol>
<li>
<p>åŒæ­¥ä»£ç å— : å¤„äºè¿™ä¸ªä»£ç å—é‡Œçš„ä»£ç , å¯ä»¥è®©çº¿ç¨‹æ“ä½œè¯¥ä»£ç å—çš„æ—¶å€™, å¯¹è¿™ä¸ªä»£ç å—è¿›è¡Œä¸Šé”.</p>
</li>
<li>
<p>åŒæ­¥å‡½æ•° : ç›´æ¥å°†å‡½æ•°å£°æ˜ä¸ºåŒæ­¥çš„</p>
</li>
</ol>
<h4 id="-åŒæ­¥ä»£ç å—">ğŸŒŸ åŒæ­¥ä»£ç å—</h4>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-java" data-lang="java"><span class="cm">/*
</span><span class="cm">	ä¼ é€’çš„å¯¹è±¡ obj å£°æ˜æˆ object ç±»å³å¯
</span><span class="cm">	å¯ä»¥å°† obj çœ‹æˆæ˜¯ä¸€ä¸ª åŒæ­¥é”
</span><span class="cm">    synchronized (obj){
</span><span class="cm">		
</span><span class="cm">		// thread operator shared resource
</span><span class="cm">	
</span><span class="cm">    }
</span><span class="cm">*/</span>

<span class="kd">class</span> <span class="nc">Ticket</span> <span class="kd">implements</span> <span class="n">Runnable</span><span class="o">{</span>
	<span class="kd">private</span> <span class="n">ticket_num</span> <span class="o">=</span> <span class="n">100</span><span class="o">;</span>
    <span class="n">object</span> <span class="n">obj</span> <span class="o">=</span> <span class="k">new</span> <span class="n">object</span><span class="o">();</span>
    <span class="kd">public</span> <span class="kt">void</span> <span class="nf">run</span><span class="o">(){</span>
        <span class="k">while</span><span class="o">(</span><span class="kc">true</span><span class="o">){</span>
            <span class="kd">synchronized</span> <span class="o">(</span><span class="n">obj</span><span class="o">){</span>
                <span class="c1">// operator shared resource
</span><span class="c1"></span>                <span class="k">if</span><span class="o">(</span><span class="n">num</span> <span class="o">&lt;</span> <span class="n">0</span><span class="o">){</span>
                    <span class="n">Sale_Ticket</span><span class="o">();</span>
                <span class="o">}</span>
            <span class="o">}</span>
        <span class="o">}</span>        
    <span class="o">}</span>
<span class="o">}</span>
</code></pre></td></tr></table>
</div>
</div><p><strong>åŒæ­¥ä»£ç å—ä¸‹éœ€è¦æ³¨æ„çš„å‰æ :</strong></p>
<p>åŒæ­¥è¿‡ç¨‹ä¸­, æ‰€æœ‰çš„çº¿ç¨‹å¿…é¡»ä½¿ç”¨åŒä¸€ä¸ªé” ğŸ”’ , ä¹Ÿå°±æ˜¯è¯´, é”å¯¹è±¡ object å¿…é¡»æ˜¯å…¨å±€çš„, è€Œä¸æ˜¯å±€éƒ¨çš„</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-java" data-lang="java"><span class="kd">class</span> <span class="nc">Ticket</span> <span class="kd">implements</span> <span class="n">Runnable</span><span class="o">{</span>
	<span class="kd">private</span> <span class="n">ticket_num</span> <span class="o">=</span> <span class="n">100</span><span class="o">;</span>
    <span class="kd">public</span> <span class="kt">void</span> <span class="nf">run</span><span class="o">(){</span>
        <span class="c1">// âŒ ä¸èƒ½å°†è¿™ä¸ªé”å£°æ˜ä¸ºå±€éƒ¨çš„
</span><span class="c1"></span>        <span class="n">object</span> <span class="n">obj</span> <span class="o">=</span> <span class="k">new</span> <span class="n">object</span><span class="o">();</span>
        <span class="k">while</span><span class="o">(</span><span class="kc">true</span><span class="o">){</span>
            <span class="kd">synchronized</span> <span class="o">(</span><span class="n">obj</span><span class="o">){</span>
                <span class="c1">// operator shared resource
</span><span class="c1"></span>                <span class="k">if</span><span class="o">(</span><span class="n">num</span> <span class="o">&lt;</span> <span class="n">0</span><span class="o">){</span>
                    <span class="n">Sale_Ticket</span><span class="o">();</span>
                <span class="o">}</span>
            <span class="o">}</span>
        <span class="o">}</span>        
    <span class="o">}</span>
<span class="o">}</span>
</code></pre></td></tr></table>
</div>
</div><h4 id="åŒæ­¥å‡½æ•°">åŒæ­¥å‡½æ•°</h4>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span><span class="lnt">26
</span><span class="lnt">27
</span><span class="lnt">28
</span><span class="lnt">29
</span><span class="lnt">30
</span><span class="lnt">31
</span><span class="lnt">32
</span><span class="lnt">33
</span><span class="lnt">34
</span><span class="lnt">35
</span><span class="lnt">36
</span><span class="lnt">37
</span><span class="lnt">38
</span><span class="lnt">39
</span><span class="lnt">40
</span><span class="lnt">41
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-java" data-lang="java"><span class="kd">class</span> <span class="nc">bank</span><span class="o">{</span>
    <span class="kd">private</span> <span class="n">num</span> <span class="o">=</span> <span class="n">0</span><span class="o">;</span>
<span class="cm">/*
</span><span class="cm">	ç”¨ synchronized ä¿®é¥°å‡½æ•°, å¯ä»¥ä¸ç”¨å†å»å®šä¹‰ä¸€ä¸ªobjå¯¹è±¡é”
</span><span class="cm">    ä½†æ˜¯æ³¨æ„åŒæ­¥å‡½æ•°, ä¾¿è§„å®šäº†åŒæ­¥èŒƒå›´, ä¸”è¯¥å‡½æ•°å†…çš„è¯­å¥å…¨éƒ¨è¢«åŒæ­¥
</span><span class="cm">    æ‰€ä»¥åŒæ­¥çš„æ—¶å€™, éœ€è¦æ³¨æ„åŒæ­¥èŒƒå›´
</span><span class="cm">*/</span>
<span class="cm">/*
</span><span class="cm">	ä½¿ç”¨åŒæ­¥å‡½æ•°çš„æ—¶å€™, ç”¨çš„é”æ˜¯å›ºå®šçš„
</span><span class="cm">	å³ä¸º this, å°±æ˜¯è¿™ä¸ªä»£ç å—çš„è°ƒç”¨å¯¹è±¡
</span><span class="cm">*/</span>
    
    <span class="kd">public</span> <span class="kd">synchronized</span> <span class="kt">void</span> <span class="nf">add</span><span class="o">(</span><span class="kt">int</span> <span class="n">i</span><span class="o">){</span>
        <span class="n">sum</span> <span class="o">=</span> <span class="n">sum</span> <span class="o">+</span> <span class="n">i</span><span class="o">;</span>
        <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">&#34;your blance is :&#34;</span> <span class="o">+</span> <span class="n">num</span><span class="o">);</span>
    <span class="o">}</span>
<span class="o">}</span>

<span class="cm">/*
</span><span class="cm">	è¡¨é¢çœ‹èµ·æ¥ run å‡½æ•°åªæœ‰ä¸€ä¸ªè¯­å¥, ä¸ç¬¦åˆäº§ç”Ÿå®‰å…¨æ€§å‰æ. 
</span><span class="cm">	ä½†æ˜¯ add ç¡®å®ä¸€ä¸ªå‡½æ•°, å‡½æ•°çš„å†…å®¹ä¹Ÿåº”è¯¥æ˜¯çº¿ç¨‹å…±äº«çš„ä¸€éƒ¨åˆ†
</span><span class="cm">	æ‰€ä»¥è¿˜æ˜¯æœ‰å®‰å…¨æ€§é—®é¢˜å‘ç”Ÿçš„å¯èƒ½.
</span><span class="cm">*/</span>

<span class="kd">class</span> <span class="nc">cust</span> <span class="kd">implements</span> <span class="n">Runnable</span><span class="o">{</span>
    <span class="n">bank</span> <span class="n">b</span> <span class="o">=</span> <span class="k">new</span> <span class="n">bank</span><span class="o">();</span>
    
    <span class="kd">public</span> <span class="nf">run</span><span class="o">(){</span>
        <span class="k">for</span><span class="o">(</span><span class="kt">int</span> <span class="n">i</span><span class="o">=</span><span class="n">0</span><span class="o">;</span> <span class="n">i</span><span class="o">&lt;</span><span class="n">3</span><span class="o">;</span> <span class="n">i</span><span class="o">++){</span>
            <span class="n">b</span><span class="o">.</span><span class="na">add</span><span class="o">(</span><span class="n">100</span><span class="o">);</span>
        <span class="o">}</span>
    <span class="o">}</span>
<span class="o">}</span>

<span class="kd">public</span> <span class="kd">static</span> <span class="kt">void</span> <span class="nf">main</span><span class="o">(</span><span class="n">String</span><span class="o">[]</span> <span class="n">args</span><span class="o">[]){</span>
    <span class="n">Cust</span> <span class="n">c</span> <span class="o">=</span> <span class="k">new</span> <span class="n">Cust</span><span class="o">();</span>
    <span class="n">Thread</span> <span class="n">t</span> <span class="o">=</span> <span class="k">new</span> <span class="n">Thread</span><span class="o">(</span><span class="n">c</span><span class="o">);</span>
    
    <span class="c1">// start thread
</span><span class="c1"></span>    <span class="n">t</span><span class="o">.</span><span class="na">start</span><span class="o">();</span>
<span class="o">}</span>
</code></pre></td></tr></table>
</div>
</div><h4 id="åŒæ­¥å‡½æ•°-å’Œ-åŒæ­¥ä»£ç å—çš„åŒºåˆ«">åŒæ­¥å‡½æ•° å’Œ åŒæ­¥ä»£ç å—çš„åŒºåˆ«</h4>
<p>åŒæ­¥ä»£ç å—çš„é”æ˜¯ä»»æ„çš„å¯¹è±¡</p>
<p>åŒæ­¥å‡½æ•°çš„é”æ˜¯å›ºå®šçš„ this</p>
<hr>
<p>å¦‚æœ åŒæ­¥å‡½æ•°çš„ä¸º <strong>é™æ€çš„å‡½æ•°</strong>, æ­¤æ—¶åŒæ­¥å‡½æ•°çš„ <strong>é”ä¾¿ä¸æ˜¯ this</strong> (é™æ€å‡½æ•°é‡Œé¢æ²¡æœ‰ this)</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span><span class="lnt">7
</span><span class="lnt">8
</span><span class="lnt">9
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-java" data-lang="java"><span class="cm">/*
</span><span class="cm">	æ­¤æ—¶åŒæ­¥å‡½æ•°çš„é”ğŸ”’ 
</span><span class="cm">	æ˜¯è¿™ä¸ªå¯¹è±¡çš„é”æ˜¯å¯¹è±¡ä¸º: è¯¥å¯¹è±¡çš„å­—èŠ‚ç å¯¹è±¡
</span><span class="cm">	this.getClass()
</span><span class="cm">*/</span>
<span class="kd">public</span> <span class="kd">static</span> <span class="kd">synchronized</span> <span class="kt">void</span> <span class="nf">add</span><span class="o">(</span><span class="kt">int</span> <span class="n">i</span><span class="o">){</span>
    <span class="n">sum</span> <span class="o">=</span> <span class="n">sum</span> <span class="o">+</span> <span class="n">i</span><span class="o">;</span>
    <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">&#34;your blance is :&#34;</span> <span class="o">+</span> <span class="n">num</span><span class="o">);</span>
<span class="o">}</span>
</code></pre></td></tr></table>
</div>
</div><h3 id="åŒæ­¥å¼Šç«¯">åŒæ­¥å¼Šç«¯</h3>
<p>åŒæ­¥è™½ç„¶ä¼šè§£å†³ä¸€éƒ¨åˆ†çš„å®‰å…¨æ€§çš„é—®é¢˜, ä½†æ˜¯ä¼šé™ä½ç¨‹åºçš„æ‰§è¡Œæ•ˆç‡</p>
<h3 id="å¤šçº¿ç¨‹ä¸‹å•ä¾‹è®¾è®¡æ¨¡å¼çš„å®‰å…¨éšæ‚£">å¤šçº¿ç¨‹ä¸‹å•ä¾‹è®¾è®¡æ¨¡å¼çš„å®‰å…¨éšæ‚£</h3>
<p>è§è®¾è®¡æ¨¡å¼ç¬”è®°</p>
<p>###æ­»é”</p>
<p>æ­»é”å°±æ˜¯, ä¸¤ä¸ªåŠä»¥ä¸Šçš„çº¿ç¨‹, ç›¸äº’æŒæœ‰å¯¹æ–¹è¦è¿è¡Œæ—¶çš„èµ„æº, ä¸”éƒ½ä¸é‡Šæ”¾è‡ªæœ‰èµ„æºçš„æƒ…å†µ, è¿™ç§æƒ…å†µ, ç›¸äº’æŒæœ‰èµ„æºçš„çº¿ç¨‹è¢«æ­»é”.</p>
<p>æ­»é”å‘ç”Ÿçš„å‰æ :</p>
<ol>
<li>è‡³å°‘æœ‰ <strong>ä¸¤ä¸ªå³ä»¥ä¸Šçš„ å…±äº«é”</strong></li>
<li>é”çš„åˆ©ç”¨ä¸Šæœ‰ <strong>ç›¸äº’åµŒå¥—</strong> çš„æƒ…å†µ</li>
</ol>
<hr>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span><span class="lnt">26
</span><span class="lnt">27
</span><span class="lnt">28
</span><span class="lnt">29
</span><span class="lnt">30
</span><span class="lnt">31
</span><span class="lnt">32
</span><span class="lnt">33
</span><span class="lnt">34
</span><span class="lnt">35
</span><span class="lnt">36
</span><span class="lnt">37
</span><span class="lnt">38
</span><span class="lnt">39
</span><span class="lnt">40
</span><span class="lnt">41
</span><span class="lnt">42
</span><span class="lnt">43
</span><span class="lnt">44
</span><span class="lnt">45
</span><span class="lnt">46
</span><span class="lnt">47
</span><span class="lnt">48
</span><span class="lnt">49
</span><span class="lnt">50
</span><span class="lnt">51
</span><span class="lnt">52
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-java" data-lang="java"><span class="cm">/*
</span><span class="cm">	ä¸€ä¸ªæ­»é”çš„ä¾‹å­
</span><span class="cm">*/</span>
<span class="kn">package</span> <span class="nn">MutiThread</span><span class="o">;</span>
<span class="kd">class</span> <span class="nc">locker</span><span class="o">{</span>

    <span class="kd">public</span> <span class="kd">static</span> <span class="kd">final</span> <span class="n">Object</span> <span class="n">lockerA</span><span class="o">=</span> <span class="k">new</span> <span class="n">Object</span><span class="o">();</span>
    <span class="kd">public</span> <span class="kd">static</span> <span class="kd">final</span> <span class="n">Object</span> <span class="n">lockerB</span><span class="o">=</span> <span class="k">new</span> <span class="n">Object</span><span class="o">();</span>

<span class="o">}</span>

<span class="kd">class</span> <span class="nc">DeadLock</span> <span class="kd">implements</span> <span class="n">Runnable</span><span class="o">{</span>

    <span class="kd">public</span> <span class="kt">boolean</span> <span class="n">flag</span><span class="o">;</span>
    <span class="kd">public</span> <span class="nf">DeadLock</span><span class="o">(</span><span class="kt">boolean</span> <span class="n">flag</span><span class="o">){</span>
        <span class="k">this</span><span class="o">.</span><span class="na">flag</span> <span class="o">=</span> <span class="n">flag</span><span class="o">;</span>
    <span class="o">}</span>
    <span class="nd">@Override</span>
    <span class="kd">public</span> <span class="kt">void</span> <span class="nf">run</span><span class="o">()</span> <span class="o">{</span>
        <span class="k">if</span><span class="o">(</span><span class="n">flag</span><span class="o">){</span>
            <span class="k">while</span><span class="o">(</span><span class="kc">true</span><span class="o">)</span> <span class="o">{</span>
                <span class="kd">synchronized</span> <span class="o">(</span><span class="n">locker</span><span class="o">.</span><span class="na">lockerA</span><span class="o">)</span> <span class="o">{</span>
                    <span class="kd">synchronized</span> <span class="o">(</span><span class="n">locker</span><span class="o">.</span><span class="na">lockerB</span><span class="o">)</span> <span class="o">{</span>
                        <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">&#34;hello : &#34;</span> <span class="o">+</span> <span class="n">Thread</span><span class="o">.</span><span class="na">currentThread</span><span class="o">().</span><span class="na">getName</span><span class="o">());</span>
                    <span class="o">}</span>
                <span class="o">}</span>
            <span class="o">}</span>

        <span class="o">}</span><span class="k">else</span><span class="o">{</span>
            <span class="k">while</span> <span class="o">(</span><span class="kc">true</span><span class="o">)</span> <span class="o">{</span>
                <span class="kd">synchronized</span> <span class="o">(</span><span class="n">locker</span><span class="o">.</span><span class="na">lockerB</span><span class="o">)</span> <span class="o">{</span>
                    <span class="kd">synchronized</span> <span class="o">(</span><span class="n">locker</span><span class="o">.</span><span class="na">lockerA</span><span class="o">)</span> <span class="o">{</span>
                        <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">&#34;hello : &#34;</span> <span class="o">+</span> <span class="n">Thread</span><span class="o">.</span><span class="na">currentThread</span><span class="o">().</span><span class="na">getName</span><span class="o">());</span>
                    <span class="o">}</span>
                <span class="o">}</span>
            <span class="o">}</span>
        <span class="o">}</span>
    <span class="o">}</span>
<span class="o">}</span>


<span class="kd">public</span> <span class="kd">class</span> <span class="nc">DeadLockDemo</span> <span class="o">{</span>
    <span class="kd">public</span> <span class="kd">static</span> <span class="kt">void</span> <span class="nf">main</span><span class="o">(</span><span class="n">String</span><span class="o">[]</span> <span class="n">args</span><span class="o">){</span>
        <span class="n">DeadLock</span> <span class="n">d</span> <span class="o">=</span> <span class="k">new</span> <span class="n">DeadLock</span><span class="o">(</span><span class="kc">true</span><span class="o">);</span>
        <span class="n">DeadLock</span> <span class="n">d2</span> <span class="o">=</span> <span class="k">new</span> <span class="n">DeadLock</span><span class="o">(</span><span class="kc">false</span><span class="o">);</span>
        <span class="n">Thread</span> <span class="n">t1</span> <span class="o">=</span> <span class="k">new</span> <span class="n">Thread</span><span class="o">(</span><span class="n">d</span><span class="o">);</span>
        <span class="n">Thread</span> <span class="n">t2</span> <span class="o">=</span> <span class="k">new</span> <span class="n">Thread</span><span class="o">(</span><span class="n">d2</span><span class="o">);</span>

        <span class="n">t1</span><span class="o">.</span><span class="na">start</span><span class="o">();</span>
        <span class="n">t2</span><span class="o">.</span><span class="na">start</span><span class="o">();</span>

    <span class="o">}</span>
</code></pre></td></tr></table>
</div>
</div><h2 id="å…­-çº¿ç¨‹ä¹‹é—´çš„åä½œ">å…­. çº¿ç¨‹ä¹‹é—´çš„åä½œ</h2>
<p>å½“å¤šä¸ªçº¿ç¨‹å¯ä»¥ä¸€èµ·å·¥ä½œå»è§£å†³æŸä¸ªé—®é¢˜æ—¶ï¼Œå¦‚æœ <strong>æŸäº›éƒ¨åˆ†å¿…é¡»åœ¨å…¶å®ƒéƒ¨åˆ†ä¹‹å‰å®Œæˆ</strong>ï¼Œé‚£ä¹ˆå°±éœ€è¦å¯¹<strong>çº¿ç¨‹è¿›è¡Œåè°ƒ</strong>ã€‚</p>
<p>æ³¨æ„ çº¿ç¨‹åä½œ ä¸åŒäº çº¿ç¨‹äº’æ–¥ .</p>
<p><strong>çº¿ç¨‹äº’æ–¥</strong> æ›´å¤šçš„æ˜¯ä¿è¯çº¿ç¨‹ä¹‹é—´ä¸è¢«å½¼æ­¤å¹²æ‰°</p>
<p><strong>çº¿ç¨‹åè°ƒ</strong> æ˜¯å¼ºè°ƒå½¼æ­¤ä¹‹é—´çš„åè°ƒ, çº¿æ€§ä¹‹é—´å­˜åœ¨å·¥ä½œçš„æ¬¡åºæ€§</p>

    </div>

    <div class="post-copyright">
  <p class="copyright-item">
    <span class="item-title">æ–‡ç« ä½œè€…</span>
    <span class="item-content">LYR</span>
  </p>
  <p class="copyright-item">
    <span class="item-title">ä¸Šæ¬¡æ›´æ–°</span>
    <span class="item-content">
        2021-08-14
        
    </span>
  </p>
  
  
</div>
<footer class="post-footer">
      
      <nav class="post-nav">
        
        <a class="next" href="/post/10.%E6%A0%A1%E6%8B%9B%E7%AC%94%E8%AE%B0/java/%E5%B9%B6%E5%8F%91/%E5%A4%9A%E7%BA%BF%E7%A8%8B%E9%9D%A2%E8%AF%95%E6%98%93%E9%97%AE/">
            <span class="next-text nav-default">å¤šçº¿ç¨‹é¢è¯•æ˜“é—®</span>
            <span class="next-text nav-mobile">ä¸‹ä¸€ç¯‡</span>
            <i class="iconfont icon-right"></i>
          </a>
      </nav>
    </footer>
  </article>
        </div>
        

  

  

      </div>
    </main>

    <footer id="footer" class="footer">
      <div class="social-links">
      <a href="mailto:lyr-2000@qq.com" class="iconfont icon-email" title="email"></a>
  <a href="http://doc.lyr-2000.xyz/index.xml" type="application/rss+xml" class="iconfont icon-rss" title="rss"></a>
</div>

<div class="copyright">
  <span class="power-by">
    ç”± <a class="hexo-link" href="https://gohugo.io">Hugo</a> å¼ºåŠ›é©±åŠ¨
  </span>
  <span class="division">|</span>
  <span class="theme-info">
    ä¸»é¢˜ - 
    <a class="theme-link" href="https://github.com/olOwOlo/hugo-theme-even">Even</a>
  </span>

  

  <span class="copyright-year">
    &copy; 
    2021<span class="heart"><i class="iconfont icon-heart"></i></span><span>lyr</span>
  </span>
</div>

    </footer>

    <div class="back-to-top" id="back-to-top">
      <i class="iconfont icon-up"></i>
    </div>
  </div>
  
  <script src="https://cdn.jsdelivr.net/npm/jquery@3.2.1/dist/jquery.min.js" integrity="sha256-hwg4gsxgFZhOsEEamdOYGBf13FyQuiTwlAQgxVSNgt4=" crossorigin="anonymous"></script>
  <script src="https://cdn.jsdelivr.net/npm/slideout@1.0.1/dist/slideout.min.js" integrity="sha256-t+zJ/g8/KXIJMjSVQdnibt4dlaDxc9zXr/9oNPeWqdg=" crossorigin="anonymous"></script>
  <script src="https://cdn.jsdelivr.net/npm/@fancyapps/fancybox@3.1.20/dist/jquery.fancybox.min.js" integrity="sha256-XVLffZaxoWfGUEbdzuLi7pwaUJv1cecsQJQqGLe7axY=" crossorigin="anonymous"></script>



<script type="text/javascript" src="/js/main.min.c99b103c33d1539acf3025e1913697534542c4a5aa5af0ccc20475ed2863603b.js"></script>
  <script type="text/javascript">
    window.MathJax = {
      tex: {
        inlineMath: [['$','$'], ['\\(','\\)']],
        tags: 'ams',
        }
    };
  </script>
  <script async src="https://cdn.jsdelivr.net/npm/mathjax@3.0.5/es5/tex-mml-chtml.js" integrity="sha256-HGLuEfFcsUJGhvB8cQ8nr0gai9EucOOaIxFw7qxmd+w=" crossorigin="anonymous"></script>






<script src="/js//custom/latex_plugin.js"></script>


</body>
</html>
