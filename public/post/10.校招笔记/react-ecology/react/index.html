<!DOCTYPE html>
<html lang="zh-cn">
<head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
  <title>react - Even - A super concise theme for Hugo</title>
  <meta name="renderer" content="webkit" />
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"/>

<meta http-equiv="Cache-Control" content="no-transform" />
<meta http-equiv="Cache-Control" content="no-siteapp" />

<meta name="theme-color" content="#f8f5ec" />
<meta name="msapplication-navbutton-color" content="#f8f5ec">
<meta name="apple-mobile-web-app-capable" content="yes">
<meta name="apple-mobile-web-app-status-bar-style" content="#f8f5ec">


<meta name="author" content="LYR" /><meta name="description" content="[TOC] 安装 创建新的React应用 Required npm , node 1 2 3 4 5 6 7 8 # 创建一个名为 my-app 的 react 应用 npx create-react-app my-app cd my-app # 启动 npm run start 核心文件 1 2 3 4 5 public - index.html src - App.js - index.js # 整个项" /><meta name="keywords" content="LYR的文档站, LYR的个人博客, even" />






<meta name="generator" content="Hugo 0.86.0 with theme even" />


<link rel="canonical" href="http://doc.lyr-2000.xyz/post/10.%E6%A0%A1%E6%8B%9B%E7%AC%94%E8%AE%B0/react-ecology/react/" />
<link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png">
<link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png">
<link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png">
<link rel="manifest" href="/manifest.json">
<link rel="mask-icon" href="/safari-pinned-tab.svg" color="#5bbad5">



<link href="/sass/main.min.b5a744db6de49a86cadafb3b70f555ab443f83c307a483402259e94726b045ff.css" rel="stylesheet">
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fancyapps/fancybox@3.1.20/dist/jquery.fancybox.min.css" integrity="sha256-7TyXnr2YU040zfSP+rEcz29ggW4j56/ujTPwjMzyqFY=" crossorigin="anonymous">


<meta property="og:title" content="react" />
<meta property="og:description" content="[TOC] 安装 创建新的React应用 Required npm , node 1 2 3 4 5 6 7 8 # 创建一个名为 my-app 的 react 应用 npx create-react-app my-app cd my-app # 启动 npm run start 核心文件 1 2 3 4 5 public - index.html src - App.js - index.js # 整个项" />
<meta property="og:type" content="article" />
<meta property="og:url" content="http://doc.lyr-2000.xyz/post/10.%E6%A0%A1%E6%8B%9B%E7%AC%94%E8%AE%B0/react-ecology/react/" /><meta property="article:section" content="post" />
<meta property="article:published_time" content="2021-08-14T22:43:02+08:00" />
<meta property="article:modified_time" content="2021-08-14T22:43:02+08:00" />

<meta itemprop="name" content="react">
<meta itemprop="description" content="[TOC] 安装 创建新的React应用 Required npm , node 1 2 3 4 5 6 7 8 # 创建一个名为 my-app 的 react 应用 npx create-react-app my-app cd my-app # 启动 npm run start 核心文件 1 2 3 4 5 public - index.html src - App.js - index.js # 整个项"><meta itemprop="datePublished" content="2021-08-14T22:43:02+08:00" />
<meta itemprop="dateModified" content="2021-08-14T22:43:02+08:00" />
<meta itemprop="wordCount" content="4837">
<meta itemprop="keywords" content="" /><meta name="twitter:card" content="summary"/>
<meta name="twitter:title" content="react"/>
<meta name="twitter:description" content="[TOC] 安装 创建新的React应用 Required npm , node 1 2 3 4 5 6 7 8 # 创建一个名为 my-app 的 react 应用 npx create-react-app my-app cd my-app # 启动 npm run start 核心文件 1 2 3 4 5 public - index.html src - App.js - index.js # 整个项"/>

<!--[if lte IE 9]>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/classlist/1.1.20170427/classList.min.js"></script>
<![endif]-->

<!--[if lt IE 9]>
  <script src="https://cdn.jsdelivr.net/npm/html5shiv@3.7.3/dist/html5shiv.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/respond.js@1.4.2/dest/respond.min.js"></script>
<![endif]-->

</head>
<body>
  <div id="mobile-navbar" class="mobile-navbar">
  <div class="mobile-header-logo">
    <a href="/" class="logo">LYR的文档站</a>
  </div>
  <div class="mobile-navbar-icon">
    <span></span>
    <span></span>
    <span></span>
  </div>
</div>
<nav id="mobile-menu" class="mobile-menu slideout-menu">
  <ul class="mobile-menu-list">
    <a href="/">
        <li class="mobile-menu-item">首页</li>
      </a><a href="/post/">
        <li class="mobile-menu-item">归档页</li>
      </a><a href="/tags/">
        <li class="mobile-menu-item">标签</li>
      </a><a href="/categories/">
        <li class="mobile-menu-item">分类</li>
      </a><a href="/about/">
        <li class="mobile-menu-item">关于</li>
      </a><a href="/friends">
        <li class="mobile-menu-item">大佬</li>
      </a>
  </ul>

  


</nav>

  <div class="container" id="mobile-panel">
    <header id="header" class="header">
        <div class="logo-wrapper">
  <a href="/" class="logo">LYR的文档站</a>
</div>





<nav class="site-navbar">
  <ul id="menu" class="menu">
    <li class="menu-item">
        <a class="menu-item-link" href="/">首页</a>
      </li><li class="menu-item">
        <a class="menu-item-link" href="/post/">归档页</a>
      </li><li class="menu-item">
        <a class="menu-item-link" href="/tags/">标签</a>
      </li><li class="menu-item">
        <a class="menu-item-link" href="/categories/">分类</a>
      </li><li class="menu-item">
        <a class="menu-item-link" href="/about/">关于</a>
      </li><li class="menu-item">
        <a class="menu-item-link" href="/friends">大佬</a>
      </li>
  </ul>
</nav>

    </header>

    <main id="main" class="main">
      <div class="content-wrapper">
        <div id="content" class="content">
          <article class="post">
    
    <header class="post-header">
      <h1 class="post-title">react</h1>

      <div class="post-meta">
        <span class="post-time"> 2021-08-14 </span>
        
        
      </div>
    </header>

    <div class="post-toc" id="post-toc">
  <h2 class="post-toc-title">文章目录</h2>
  <div class="post-toc-content">
    <nav id="TableOfContents">
  <ul>
    <li><a href="#安装">安装</a>
      <ul>
        <li><a href="#创建新的react应用">创建新的React应用</a></li>
        <li><a href="#核心文件">核心文件</a></li>
      </ul>
    </li>
    <li><a href="#核心概念">核心概念</a>
      <ul>
        <li><a href="#jsx">JSX</a>
          <ul>
            <li><a href="#防止冲突重命名">防止冲突重命名</a></li>
            <li><a href="#允许输入嵌入html标签">允许输入嵌入HTML标签</a></li>
          </ul>
        </li>
        <li><a href="#组件">组件</a>
          <ul>
            <li><a href="#创建一个简单组件">创建一个简单组件</a></li>
            <li><a href="#组件间传值">组件间传值</a></li>
            <li><a href="#组件传值类型检查">组件传值类型检查</a></li>
            <li><a href="#组件传值默认值设定">组件传值默认值设定</a></li>
            <li><a href="#组件-render-函数">组件 <code>render()</code> 函数</a></li>
          </ul>
        </li>
        <li><a href="#state">State</a>
          <ul>
            <li><a href="#数据组件绑定的一个例子">数据组件绑定的一个例子</a></li>
            <li><a href="#更新ui-setstate">更新UI <code>setState</code></a></li>
            <li><a href="#异步-setstate">异步 <code>setState</code></a></li>
            <li><a href="#setsatet-更新规范"><code>setSatet</code> 更新规范</a></li>
          </ul>
        </li>
        <li><a href="#生命周期函数">生命周期函数</a>
          <ul>
            <li><a href="#挂载周期">挂载周期</a></li>
            <li><a href="#更新周期">更新周期</a></li>
            <li><a href="#解除挂载周期">解除挂载周期</a></li>
          </ul>
        </li>
        <li><a href="#虚拟-dom">虚拟 DOM</a>
          <ul>
            <li><a href="#虚拟dom-diff-比对算法">虚拟DOM diff 比对算法</a></li>
            <li><a href="#节点-key-值选取">节点 Key 值选取</a></li>
          </ul>
        </li>
        <li><a href="#事件">事件</a>
          <ul>
            <li><a href="#事件命名">事件命名</a></li>
            <li><a href="#向事件处理程序传递参数">向事件处理程序传递参数</a></li>
          </ul>
        </li>
      </ul>
    </li>
    <li><a href="#项目构建准则">项目构建准则</a>
      <ul>
        <li><a href="#项目标准目录">项目标准目录</a></li>
        <li><a href="#组件逻辑和ui拆分">组件逻辑和UI拆分</a></li>
      </ul>
    </li>
    <li><a href="#扩展">扩展</a>
      <ul>
        <li><a href="#axios-ajax-操作"><code>axios</code> AJAX 操作</a>
          <ul>
            <li><a href="#安装-1">安装</a></li>
            <li><a href="#get"><code>get</code></a></li>
            <li><a href="#post"><code>post</code></a></li>
          </ul>
        </li>
        <li><a href="#styled-components"><code>styled-components</code></a>
          <ul>
            <li><a href="#安装-2">安装</a></li>
            <li><a href="#全局样式">全局样式</a></li>
            <li><a href="#组件局部样式">组件局部样式</a></li>
            <li><a href="#选择器--和-">选择器 <code>&amp;</code> 和 <code>.</code></a></li>
          </ul>
        </li>
        <li><a href="#react-transition-group"><code>react-transition-group</code></a>
          <ul>
            <li><a href="#安装-3">安装</a></li>
            <li><a href="#入门使用">入门使用</a></li>
          </ul>
        </li>
        <li><a href="#react-router-dom"><code>react-router-dom</code></a>
          <ul>
            <li><a href="#安装-4">安装</a></li>
            <li><a href="#使用">使用</a></li>
            <li><a href="#更一般的">更一般的</a></li>
            <li><a href="#动态路由---必选参数">动态路由 - 必选参数</a></li>
            <li><a href="#动态路由---可选参数">动态路由 - 可选参数</a></li>
            <li><a href="#标签跳转link">标签跳转<code>Link</code></a></li>
            <li><a href="#路由重定向">路由重定向</a></li>
          </ul>
        </li>
        <li><a href="#react-loadable"><code>react-loadable</code></a></li>
      </ul>
    </li>
  </ul>
</nav>
  </div>
</div>
    <div class="post-content">
      <p>[TOC]</p>
<h1 id="安装">安装</h1>
<h2 id="创建新的react应用">创建新的React应用</h2>
<p>Required <code>npm</code> , <code>node</code></p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span><span class="lnt">7
</span><span class="lnt">8
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="c1"># 创建一个名为 my-app 的 react 应用</span>
npx create-react-app my-app


<span class="nb">cd</span> my-app

<span class="c1"># 启动</span>
npm run start
</code></pre></td></tr></table>
</div>
</div><h2 id="核心文件">核心文件</h2>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback">public 
	- index.html 
src 
	- App.js	
	- index.js	# 整个项目的入口文件
</code></pre></td></tr></table>
</div>
</div><div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-javascript" data-lang="javascript"><span class="c1">// index.js
</span><span class="c1"></span>
<span class="kr">import</span> <span class="nx">React</span> <span class="nx">from</span> <span class="s1">&#39;react&#39;</span><span class="p">;</span>
<span class="kr">import</span> <span class="nx">ReactDOM</span> <span class="nx">from</span> <span class="s1">&#39;react-dom&#39;</span><span class="p">;</span>
<span class="c1">// 实际上是 ./App.js 文件，如果没有加后缀，则默认先寻找js文件
</span><span class="c1"></span><span class="kr">import</span> <span class="nx">App</span> <span class="nx">from</span> <span class="s1">&#39;./App&#39;</span><span class="p">;</span>

<span class="nx">ReactDOM</span><span class="p">.</span><span class="nx">render</span><span class="p">(</span>
  <span class="c1">// JSX语法引入自定义App组件，且自定义组件名称需要以大写字母开头
</span><span class="c1"></span>  <span class="o">&lt;</span><span class="nx">App</span> <span class="o">/&gt;</span>
  <span class="p">,</span>
  <span class="nb">document</span><span class="p">.</span><span class="nx">getElementById</span><span class="p">(</span><span class="s1">&#39;root&#39;</span><span class="p">)</span>
<span class="p">);</span>
</code></pre></td></tr></table>
</div>
</div><div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-javascript" data-lang="javascript"><span class="c1">// App.js 定义了一个 App 组件
</span><span class="c1"></span>

<span class="c1">// 相当于引入 React 和 React.Component
</span><span class="c1"></span><span class="kr">import</span> <span class="nx">React</span><span class="p">,</span> <span class="p">{</span> <span class="nx">Component</span> <span class="p">}</span> <span class="nx">from</span> <span class="s1">&#39;react&#39;</span><span class="p">;</span>

<span class="c1">// 定义一个 App 组件， 必须继承于 React.Component
</span><span class="c1"></span><span class="kr">class</span> <span class="nx">App</span> <span class="kr">extends</span> <span class="nx">Component</span><span class="p">{</span>
  <span class="nx">render</span><span class="p">(){</span>
      <span class="k">return</span> <span class="p">(</span>
        <span class="c1">// JSX 形式的标签需要引入 React 
</span><span class="c1"></span>        <span class="o">&lt;</span><span class="nx">div</span><span class="o">&gt;</span>
          <span class="nx">hello</span> <span class="nx">world</span>
        <span class="o">&lt;</span><span class="err">/div&gt;</span>
      <span class="p">);</span>
  <span class="p">}</span>
<span class="p">}</span>
<span class="kr">export</span> <span class="k">default</span> <span class="nx">App</span><span class="p">;</span>

</code></pre></td></tr></table>
</div>
</div><h1 id="核心概念">核心概念</h1>
<h2 id="jsx">JSX</h2>
<blockquote>
<p>这个有趣的标签语法既不是字符串也不是 HTML。</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-javascript" data-lang="javascript"><span class="kr">const</span> <span class="nx">element</span> <span class="o">=</span> <span class="o">&lt;</span><span class="nx">h1</span><span class="o">&gt;</span><span class="nx">Hello</span><span class="p">,</span> <span class="nx">world</span><span class="o">!&lt;</span><span class="err">/h1&gt;;</span>
</code></pre></td></tr></table>
</div>
</div></blockquote>
<p>React 将HTML标签定义在 JavaScript文件中变成了 JSX</p>
<h3 id="防止冲突重命名">防止冲突重命名</h3>
<p>为了防止HTML标签中的语法和JS关键字冲突，React 对HTML中的标签进行了重命名</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-javascript" data-lang="javascript"><span class="c1">// 1. class =&gt; className
</span><span class="c1"></span><span class="o">&lt;</span><span class="nx">h1</span> <span class="nx">className</span><span class="o">=</span><span class="s1">&#39;h1&#39;</span><span class="o">&gt;</span> <span class="nx">hello</span> <span class="nx">world</span> <span class="o">&lt;</span><span class="err">/h1&gt;</span>

<span class="c1">// 2. for =&gt; htmlFor
</span><span class="c1"></span><span class="o">&lt;</span><span class="nx">label</span> <span class="nx">htmlFor</span><span class="o">=</span><span class="s1">&#39;insertArea&#39;</span><span class="o">&gt;</span><span class="nx">请输入内容</span><span class="o">&lt;</span><span class="err">/label&gt;</span>
<span class="o">&lt;</span><span class="nx">input</span> <span class="nx">id</span><span class="o">=</span><span class="s1">&#39;insertArea&#39;</span> <span class="o">/&gt;</span>
</code></pre></td></tr></table>
</div>
</div><h3 id="允许输入嵌入html标签">允许输入嵌入HTML标签</h3>
<p><code>dangerouslySetInnerHTML</code></p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-javascript" data-lang="javascript"><span class="c1">// dangerouslySetInnerHTML 属性允许将 content 内容不经过解析直接嵌入到 &lt;li&gt; 标签里面去
</span><span class="c1"></span><span class="o">&lt;</span><span class="nx">li</span> 
<span class="nx">dangerouslySetInnerHTML</span> <span class="o">=</span> <span class="p">{{</span><span class="mi">__</span><span class="nx">html</span><span class="o">:</span><span class="nx">content</span><span class="p">}}</span>
<span class="o">&gt;</span>
<span class="o">&lt;</span><span class="err">/li&gt;</span>
</code></pre></td></tr></table>
</div>
</div><h2 id="组件">组件</h2>
<blockquote>
<p>组件思想允许你将 UI 拆分为独立可复用的代码片段，并对每个片段进行独立构思。</p>
</blockquote>
<h3 id="创建一个简单组件">创建一个简单组件</h3>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-javascript" data-lang="javascript"><span class="c1">// 创建一个 HelloWorld 组件
</span><span class="c1">// 需要引入 React 和 React.Component
</span><span class="c1"></span>
<span class="kr">import</span> <span class="nx">React</span><span class="p">,</span> <span class="p">{</span><span class="nx">Component</span><span class="p">}</span> <span class="nx">from</span> <span class="s1">&#39;react&#39;</span>

<span class="c1">// 组件需要继承 React.Component
</span><span class="c1"></span><span class="kr">class</span> <span class="nx">HelloWorld</span> <span class="kr">extends</span> <span class="nx">Component</span><span class="p">{</span>
    
    <span class="c1">// 使用render(){}函数的返回值定义组件的内容
</span><span class="c1"></span>    <span class="nx">render</span><span class="p">(){</span>
        <span class="k">return</span><span class="p">(</span>
			<span class="o">&lt;</span><span class="nx">div</span><span class="o">&gt;</span> <span class="nx">hello</span> <span class="nx">world</span> <span class="o">&lt;</span><span class="err">/div&gt;</span>
        <span class="p">)</span>
    <span class="p">}</span>
<span class="p">}</span>

<span class="c1">// 导出 HelloWolrd 组件
</span><span class="c1"></span><span class="kr">export</span> <span class="k">default</span> <span class="nx">HelloWorld</span>
</code></pre></td></tr></table>
</div>
</div><h3 id="组件间传值">组件间传值</h3>
<ul>
<li>父组件在子组件的标签引用处通过其标签属性的方式向子组件传值，且此值为 <code>read only</code></li>
<li>子组件需要改变父组件值的时候，需要调用父组件对应的方法，而不应该在组件里更改 （单向数据流的）</li>
</ul>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span><span class="lnt">26
</span><span class="lnt">27
</span><span class="lnt">28
</span><span class="lnt">29
</span><span class="lnt">30
</span><span class="lnt">31
</span><span class="lnt">32
</span><span class="lnt">33
</span><span class="lnt">34
</span><span class="lnt">35
</span><span class="lnt">36
</span><span class="lnt">37
</span><span class="lnt">38
</span><span class="lnt">39
</span><span class="lnt">40
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-javascript" data-lang="javascript"><span class="kr">class</span> <span class="nx">fatherComponent</span> <span class="kr">extends</span> <span class="nx">Component</span><span class="p">{</span>
    <span class="nx">render</span><span class="p">(){</span>
		<span class="c1">// 在父组件中调用子组件        
</span><span class="c1"></span>        <span class="o">&lt;</span><span class="nx">childComponent</span> 
        
        <span class="c1">// 参数的传递直接在其标签中定义
</span><span class="c1"></span>        <span class="nx">item</span><span class="o">=</span><span class="p">{</span><span class="nx">item</span><span class="p">}</span>
        <span class="nx">index</span><span class="o">=</span><span class="p">{</span><span class="nx">index</span><span class="p">}</span>
        <span class="nx">deleteItem</span> <span class="o">=</span> <span class="p">{</span><span class="k">this</span><span class="p">.</span><span class="nx">fatherClickHandler</span><span class="p">.</span><span class="nx">bind</span><span class="p">(</span><span class="k">this</span><span class="p">,</span> <span class="nx">index</span><span class="p">)}</span>
        <span class="o">&gt;</span>
        <span class="o">&lt;</span><span class="err">/childComponent&gt; </span>
    <span class="p">}</span>
<span class="p">}</span>


<span class="c1">// 子组件中使用 this.props. 的方式进行调用
</span><span class="c1"></span><span class="kr">class</span> <span class="nx">childComponent</span> <span class="kr">extends</span> <span class="nx">Component</span><span class="p">{</span>

    <span class="nx">constructor</span><span class="p">(</span><span class="nx">props</span><span class="p">){</span>
        <span class="kr">super</span><span class="p">(</span><span class="nx">props</span><span class="p">)</span>
    <span class="p">}</span>
    
    <span class="nx">render</span><span class="p">(){</span>
        <span class="k">return</span><span class="p">(</span>
            <span class="o">&lt;</span><span class="nx">div</span> 
            <span class="nx">key</span><span class="o">=</span><span class="p">{</span><span class="k">this</span><span class="p">.</span><span class="nx">props</span><span class="p">.</span><span class="nx">index</span><span class="p">}</span>
            <span class="nx">onClick</span><span class="o">=</span><span class="p">{</span><span class="k">this</span><span class="p">.</span><span class="nx">childClickHandler</span><span class="p">}</span>
            <span class="nx">dangerouslySetInnerHTML</span> <span class="o">=</span> <span class="p">{{</span><span class="mi">__</span><span class="nx">html</span><span class="o">:</span><span class="k">this</span><span class="p">.</span><span class="nx">props</span><span class="p">.</span><span class="nx">item</span><span class="p">}}</span>
            <span class="o">&gt;</span>
            <span class="o">&lt;</span><span class="err">/div&gt;</span>
        <span class="p">)</span>
    <span class="p">}</span>
    
    <span class="nx">childClickHandler</span><span class="p">(){</span>
        
        <span class="c1">// 子组件向父组件中的函数传值
</span><span class="c1"></span>        <span class="k">this</span><span class="p">.</span><span class="nx">props</span><span class="p">.</span><span class="nx">fatherClickHandler</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">props</span><span class="p">.</span><span class="nx">index</span><span class="p">)</span>
    <span class="p">}</span>
    
<span class="p">}</span>
</code></pre></td></tr></table>
</div>
</div><h3 id="组件传值类型检查">组件传值类型检查</h3>
<p><a href="https://react.docschina.org/docs/typechecking-with-proptypes.html">React 类型检查</a></p>
<p>在父组件向子组件传递值时候，需要限定值的类型</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-javascript" data-lang="javascript"><span class="kr">import</span> <span class="nx">PropTypes</span> <span class="nx">from</span> <span class="s1">&#39;prop-types&#39;</span><span class="p">;</span>

<span class="kr">class</span> <span class="nx">Greeting</span> <span class="kr">extends</span> <span class="nx">React</span><span class="p">.</span><span class="nx">Component</span> <span class="p">{</span>
  <span class="nx">render</span><span class="p">()</span> <span class="p">{</span>
    <span class="k">return</span> <span class="p">(</span>
      <span class="o">&lt;</span><span class="nx">h1</span><span class="o">&gt;</span><span class="nx">Hello</span><span class="p">,</span> <span class="p">{</span><span class="k">this</span><span class="p">.</span><span class="nx">props</span><span class="p">.</span><span class="nx">name</span><span class="p">}</span><span class="o">&lt;</span><span class="err">/h1&gt;</span>
    <span class="p">);</span>
  <span class="p">}</span>
<span class="p">}</span>

<span class="c1">// name 值必须为 string 类型的
</span><span class="c1"></span><span class="nx">Greeting</span><span class="p">.</span><span class="nx">propTypes</span> <span class="o">=</span> <span class="p">{</span>
  <span class="nx">name</span><span class="o">:</span> <span class="nx">PropTypes</span><span class="p">.</span><span class="nx">string</span>
<span class="p">};</span>

</code></pre></td></tr></table>
</div>
</div><h3 id="组件传值默认值设定">组件传值默认值设定</h3>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-javascript" data-lang="javascript"><span class="kr">class</span> <span class="nx">Greeting</span> <span class="kr">extends</span> <span class="nx">React</span><span class="p">.</span><span class="nx">Component</span> <span class="p">{</span>
  <span class="nx">render</span><span class="p">()</span> <span class="p">{</span>
    <span class="k">return</span> <span class="p">(</span>
      <span class="o">&lt;</span><span class="nx">h1</span><span class="o">&gt;</span><span class="nx">Hello</span><span class="p">,</span> <span class="p">{</span><span class="k">this</span><span class="p">.</span><span class="nx">props</span><span class="p">.</span><span class="nx">name</span><span class="p">}</span><span class="o">&lt;</span><span class="err">/h1&gt;</span>
    <span class="p">);</span>
  <span class="p">}</span>
<span class="p">}</span>

<span class="c1">// 指定 props 的默认值：
</span><span class="c1"></span><span class="nx">Greeting</span><span class="p">.</span><span class="nx">defaultProps</span> <span class="o">=</span> <span class="p">{</span>
  <span class="nx">name</span><span class="o">:</span> <span class="s1">&#39;Stranger&#39;</span>
<span class="p">};</span>
</code></pre></td></tr></table>
</div>
</div><h3 id="组件-render-函数">组件 <code>render()</code> 函数</h3>
<p>组件的 <code>render()</code> 定义了该组件的显示内容，每当组件的 <code>state</code>, <code>props</code>变量发生变化，以及父组件的<code>render()</code>函数执行的时候，该<code>render()</code>函数便会被重新执行一次，从而实现了和数据的动态绑定。</p>
<p><code>redner()</code> 函数的重新执行效率非常高, 得益于其 <strong>虚拟 DOM 机制</strong>。</p>
<h2 id="state">State</h2>
<p>为了实现UI界面的动态更新，React的思想是将各个组件和数据动态绑定，从而实现当数据变化的时候，组件的显示相应的变化。</p>
<h3 id="数据组件绑定的一个例子">数据组件绑定的一个例子</h3>
<p>React将组件的数据存放在 <code>state</code> 成员变量中，可以在组件的构造函数中进行初始化。</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span><span class="lnt">26
</span><span class="lnt">27
</span><span class="lnt">28
</span><span class="lnt">29
</span><span class="lnt">30
</span><span class="lnt">31
</span><span class="lnt">32
</span><span class="lnt">33
</span><span class="lnt">34
</span><span class="lnt">35
</span><span class="lnt">36
</span><span class="lnt">37
</span><span class="lnt">38
</span><span class="lnt">39
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-javascript" data-lang="javascript"><span class="c1">// 动态获取和更新 input 输入框
</span><span class="c1"></span>
<span class="c1">// TodoList 组件
</span><span class="c1"></span><span class="kr">import</span> <span class="nx">React</span><span class="p">,</span> <span class="p">{</span><span class="nx">Component</span><span class="p">,</span> <span class="nx">Fragment</span><span class="p">}</span> <span class="nx">from</span> <span class="s1">&#39;react&#39;</span>
<span class="kr">class</span> <span class="nx">TodoList</span> <span class="kr">extends</span> <span class="nx">Component</span><span class="p">{</span>

    <span class="c1">// TodoList 的构造函数
</span><span class="c1"></span>    <span class="nx">constructor</span><span class="p">(</span><span class="nx">param</span><span class="p">){</span>
        <span class="kr">super</span><span class="p">(</span><span class="nx">param</span><span class="p">)</span>
        <span class="k">this</span><span class="p">.</span><span class="nx">state</span> <span class="o">=</span> <span class="p">{</span>
            <span class="s1">&#39;inputValue&#39;</span> <span class="o">:</span> <span class="s1">&#39;hello world&#39;</span><span class="p">,</span>
        <span class="p">};</span>
    <span class="p">}</span>
    
    <span class="nx">render</span><span class="p">(){</span>
        <span class="k">return</span><span class="p">(</span>
            <span class="o">&lt;</span><span class="nx">div</span><span class="o">&gt;</span>
            	<span class="c1">// 将组件的 inputValue 值和 input 输入框绑定
</span><span class="c1"></span>            	<span class="c1">// 从而更新 inputValue 的值便可以更新输入框的内容
</span><span class="c1"></span>                <span class="o">&lt;</span><span class="nx">input</span> 
                    <span class="nx">value</span><span class="o">=</span><span class="p">{</span><span class="k">this</span><span class="p">.</span><span class="nx">state</span><span class="p">.</span><span class="nx">inputValue</span><span class="p">}</span>
            
            		<span class="c1">// 注意这里需要绑定 this 使得函数中this指向该组件
</span><span class="c1"></span>                    <span class="nx">onChange</span> <span class="o">=</span> <span class="p">{</span><span class="k">this</span><span class="p">.</span><span class="nx">inputChangeHandler</span><span class="p">.</span><span class="nx">bind</span><span class="p">(</span><span class="k">this</span><span class="p">)}</span>
                <span class="o">/&gt;</span>
                <span class="o">&lt;</span><span class="nx">button</span><span class="o">&gt;</span><span class="nx">确定</span><span class="o">&lt;</span><span class="err">/button&gt;</span>
            <span class="o">&lt;</span><span class="err">/div&gt;</span>
		<span class="p">)</span>

    <span class="nx">inputChangeHandler</span><span class="p">(</span><span class="nx">e</span><span class="p">){</span>
        <span class="c1">// 更新 state
</span><span class="c1"></span>        <span class="c1">// e.target 代表该DOM元素:Input
</span><span class="c1"></span>        <span class="c1">// this.setState 为React设计的更新state方法，不能直接使用等号更新
</span><span class="c1"></span>        <span class="k">this</span><span class="p">.</span><span class="nx">setState</span><span class="p">({</span>
            <span class="s1">&#39;inputValue&#39;</span> <span class="o">:</span> <span class="nx">e</span><span class="p">.</span><span class="nx">target</span><span class="p">.</span><span class="nx">value</span>
        <span class="p">})</span>
    <span class="p">}</span>
<span class="p">}</span>
<span class="kr">export</span> <span class="k">default</span> <span class="nx">TodoList</span>
</code></pre></td></tr></table>
</div>
</div><h3 id="更新ui-setstate">更新UI <code>setState</code></h3>
<p>React 中将组件的数据和该类的 state 变量绑定在一起， 从而实现改变 state 变量的时候 UI 动态更新.</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-javascript" data-lang="javascript"><span class="c1">// 正确的更新 state
</span><span class="c1"></span>

<span class="c1">// Wrong
</span><span class="c1">// 不可以使用将 state 直接赋值的方法更新
</span><span class="c1"></span><span class="k">this</span><span class="p">.</span><span class="nx">state</span><span class="p">.</span><span class="nx">comment</span> <span class="o">=</span> <span class="s1">&#39;Hello&#39;</span><span class="p">;</span>

<span class="c1">// Correct
</span><span class="c1">// 需要调用 setState 的方法更新
</span><span class="c1"></span><span class="k">this</span><span class="p">.</span><span class="nx">setState</span><span class="p">({</span><span class="nx">comment</span><span class="o">:</span> <span class="s1">&#39;Hello&#39;</span><span class="p">});</span>

</code></pre></td></tr></table>
</div>
</div><h3 id="异步-setstate">异步 <code>setState</code></h3>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-javascript" data-lang="javascript"><span class="cm">/* setState 是一个异步函数。 */</span>
<span class="k">this</span><span class="p">.</span><span class="nx">setState</span><span class="p">(()</span> <span class="p">=&gt;</span> <span class="p">({</span>
    <span class="s1">&#39;list&#39;</span> <span class="o">:</span> <span class="nx">currentList</span>
<span class="p">}),</span> <span class="p">()</span> <span class="p">=&gt;</span> <span class="p">{</span>
    <span class="cm">/* 可以用setState的回掉函数从而实现在setSatet后执行某功能 */</span>
    <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s1">&#39;hello world1&#39;</span><span class="p">)</span>
<span class="p">}</span>
<span class="p">)</span>

<span class="cm">/* 此时setState()一般会执行在 console.log() 之后 */</span>
<span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s1">&#39;hello world2&#39;</span><span class="p">)</span>
</code></pre></td></tr></table>
</div>
</div><h3 id="setsatet-更新规范"><code>setSatet</code> 更新规范</h3>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-javascript" data-lang="javascript"><span class="c1">// old version
</span><span class="c1"></span><span class="nx">inputChangeHandler</span><span class="p">(</span><span class="nx">e</span><span class="p">){</span>
    <span class="c1">// 更新 state
</span><span class="c1"></span>    <span class="k">this</span><span class="p">.</span><span class="nx">setState</span><span class="p">({</span>
         <span class="s1">&#39;inputValue&#39;</span> <span class="o">:</span> <span class="nx">e</span><span class="p">.</span><span class="nx">target</span><span class="p">.</span><span class="nx">value</span>
    <span class="p">})</span>
<span class="p">}</span>


<span class="c1">// new version
</span><span class="c1"></span><span class="nx">inputChangeHandler</span><span class="p">(</span><span class="nx">e</span><span class="p">){</span>
    <span class="c1">// 将更新的变量以常数的形式先定义在外面
</span><span class="c1"></span>    <span class="kr">const</span> <span class="nx">value</span> <span class="o">=</span> <span class="nx">e</span><span class="p">.</span><span class="nx">target</span><span class="p">.</span><span class="nx">value</span>
    
    <span class="k">this</span><span class="p">.</span><span class="nx">setState</span><span class="p">(()=&gt;({</span>
        <span class="s1">&#39;inputValue&#39;</span> <span class="o">:</span> <span class="nx">value</span>
    <span class="p">}))</span>
<span class="p">}</span>
</code></pre></td></tr></table>
</div>
</div><h2 id="生命周期函数">生命周期函数</h2>
<blockquote>
<p>生命周期函数指在某一时刻被自动调用执行的函数, 如 render() 函数</p>
</blockquote>
<p><code>react</code> 的生命周期函数包括以下</p>
<p><img src='/image/life-cycle.jpg' /></p>
<h3 id="挂载周期">挂载周期</h3>
<p>挂载周期即 将<code>render()</code>中生成的内容，挂载到真实的 DOM 节点中。挂载周期内的周期函数在组件的存在期间只执行一次。</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-javascript" data-lang="javascript"><span class="c1">// 组件被挂载之前执行
</span><span class="c1"></span><span class="nx">componentWillMount</span><span class="p">(){</span>
    <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s2">&#34; componentWillMount &#34;</span><span class="p">)</span>
<span class="p">}</span>

<span class="c1">// 最常用的 render 函数提供挂载模版
</span><span class="c1"></span><span class="nx">render</span><span class="p">(){</span>
    <span class="c1">// JSX 
</span><span class="c1"></span><span class="p">}</span>

<span class="c1">// 组件被挂载之后
</span><span class="c1"></span><span class="nx">componentDidMount</span><span class="p">(){</span>
    <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s2">&#34; componentDidMount &#34;</span><span class="p">)</span>
<span class="p">}</span>
</code></pre></td></tr></table>
</div>
</div><h3 id="更新周期">更新周期</h3>
<p>指将<code>React</code>中的两个变量 <code>Props</code> 和 <code>State</code> 发生变化的时候的周期函数</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span><span class="lnt">26
</span><span class="lnt">27
</span><span class="lnt">28
</span><span class="lnt">29
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-javascript" data-lang="javascript"><span class="c1">// 1. 当一个组件从父组件接受参数 
</span><span class="c1">// 2. 当父组件 除第一次外的render函数执行，子组件的这个生命周期便被执行 
</span><span class="c1"></span><span class="nx">componentWillReceiveProps</span><span class="p">(){</span>

    <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s2">&#34; componentWillReceiveProps &#34;</span><span class="p">)</span>

<span class="p">}</span>

<span class="c1">// 状态是否需要更新
</span><span class="c1">// bool 返回值 true 表示需要更新, false 表示不必更新
</span><span class="c1"></span><span class="nx">shouldComponentUpdate</span><span class="p">(){</span>
    <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s2">&#34; shouldComponentUpdate &#34;</span><span class="p">)</span>
    <span class="k">return</span> <span class="kc">true</span>
<span class="p">}</span>

<span class="c1">// 状态更新前
</span><span class="c1"></span><span class="nx">componentWillUpdate</span><span class="p">(){</span>
    <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s2">&#34; componentWillUpdate &#34;</span><span class="p">)</span>
<span class="p">}</span>

<span class="c1">// 状态更新 重新执行 render()
</span><span class="c1"></span><span class="nx">render</span><span class="p">(){</span>
    <span class="c1">// JSX
</span><span class="c1"></span><span class="p">}</span>

<span class="c1">// 状态更新后
</span><span class="c1"></span><span class="nx">componentDidUpdate</span><span class="p">(){</span>
    <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s2">&#34; componentDidUpdate &#34;</span><span class="p">)</span>
<span class="p">}</span>
</code></pre></td></tr></table>
</div>
</div><h3 id="解除挂载周期">解除挂载周期</h3>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-javascript" data-lang="javascript"><span class="c1">// 当该组件从页面剔除之前执行
</span><span class="c1"></span><span class="nx">componentWillUnmount</span><span class="p">(){</span>
    <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s2">&#34; componentWillUnmount &#34;</span><span class="p">)</span>
<span class="p">}</span>
</code></pre></td></tr></table>
</div>
</div><h2 id="虚拟-dom">虚拟 DOM</h2>
<p><code>React</code> 中使用 虚拟DOM 的方案高性能的更新 UI，其过程可以总结如下：</p>
<ol>
<li>
<p>定义 state 数据</p>
</li>
<li>
<p>JSX 模版</p>
</li>
<li>
<p>JSX模版 + 数据 生成一个虚拟 DOM</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-javascript" data-lang="javascript"><span class="c1">// JSX 模版通过 React.creatElement() 函数转化为 虚拟DOM
</span><span class="c1">// 例如在 render 函数中一下两种写法等价
</span><span class="c1"></span><span class="nx">render</span><span class="p">(){</span>

 <span class="k">return</span> <span class="o">&lt;</span><span class="nx">div</span> <span class="nx">id</span><span class="o">=</span><span class="s1">&#39;a&#39;</span><span class="o">&gt;&lt;</span><span class="nx">span</span><span class="o">&gt;</span><span class="nx">hello</span> <span class="nx">world</span><span class="o">&lt;</span><span class="err">/span&gt;&lt;/div&gt;;</span>
 <span class="k">return</span> <span class="nx">React</span><span class="p">.</span><span class="nx">creatElement</span><span class="p">(</span><span class="s1">&#39;div&#39;</span> <span class="p">{</span><span class="nx">id</span><span class="o">:</span><span class="mi">1</span><span class="p">},</span> <span class="nx">React</span><span class="p">.</span><span class="nx">creatElement</span><span class="p">(</span><span class="s1">&#39;span&#39;</span><span class="p">,</span> <span class="p">{},</span> <span class="s1">&#39;hello world&#39;</span><span class="p">))</span>

<span class="p">}</span>

<span class="c1">// 假如真实 DOM 对应的虚拟 DOM 即为
</span><span class="c1"></span><span class="p">[</span><span class="s1">&#39;div&#39;</span><span class="p">,{</span><span class="nx">id</span><span class="o">:</span><span class="nx">a</span><span class="p">},</span> <span class="p">[</span><span class="s1">&#39;span&#39;</span><span class="p">,{},</span><span class="s1">&#39;hello world&#39;</span><span class="p">]]</span>
</code></pre></td></tr></table>
</div>
</div></li>
<li>
<p>根据虚拟 DOM生成 真实DOM 用来 UI 显示</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-html" data-lang="html"><span class="p">&lt;</span><span class="nt">div</span> <span class="na">id</span><span class="o">=</span><span class="s">&#39;a&#39;</span><span class="p">&gt;&lt;</span><span class="nt">span</span><span class="p">&gt;</span>hello world<span class="p">&lt;/</span><span class="nt">span</span><span class="p">&gt;&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
</code></pre></td></tr></table>
</div>
</div></li>
<li>
<p>当数据更新的时候，数据 + 模版 会生成一个 <strong>新的虚拟DOM</strong></p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback">// 更改后的虚拟DOM
[&#39;div&#39;,{id:a}, [&#39;span&#39;,{},&#39;hello&#39;]]
</code></pre></td></tr></table>
</div>
</div></li>
<li>
<p>比较新旧两个 虚拟DOM 之间的差异，找到区别</p>
</li>
<li>
<p>直接操作原来的真实DOM, 从而更新</p>
</li>
</ol>
<p><strong>虚拟DOM的优势</strong></p>
<ul>
<li><code>React</code> 中虚拟DOM实质上就是一个 JS 对象，可以很快的创建和比较，而真实DOM的创建和比较很耗费时间。</li>
<li>由于中间虚拟DOM的存在，使得 React 不仅可以应用于 WebApp 开发，原生应用也可以通过解析虚拟DOM来显示UI。</li>
</ul>
<h3 id="虚拟dom-diff-比对算法">虚拟DOM diff 比对算法</h3>
<p><img src='/image/dom-diff.png' /></p>
<p>新旧的虚拟 DOM 采用同层比对的算法，从根节点开始往下，如果该层的节点不同，则直接替换该层及以下的所有节点，而不再进行比较.</p>
<h3 id="节点-key-值选取">节点 Key 值选取</h3>
<p>由于 React 中 diff 比对算法和节点的 key 值关联，从而最好在新旧虚拟DOM中，节点 key 值最好稳定不变。<strong>所以最好不要在循环中使用 index 作为节点 key 值</strong></p>
<h2 id="事件">事件</h2>
<h3 id="事件命名">事件命名</h3>
<p>在 React 中，时间需要使用 camelClass 的方式命名 (区分于传统 JavaScript)</p>
<p>例如，传统的 HTML：</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-html" data-lang="html"><span class="p">&lt;</span><span class="nt">button</span> <span class="na">onclick</span><span class="o">=</span><span class="s">&#34;activateLasers()&#34;</span><span class="p">&gt;</span>
  Activate Lasers
<span class="p">&lt;/</span><span class="nt">button</span><span class="p">&gt;</span>
</code></pre></td></tr></table>
</div>
</div><p>在 React 中略微不同：</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-html" data-lang="html"><span class="p">&lt;</span><span class="nt">button</span> <span class="na">onClick</span><span class="o">=</span><span class="s">{activateLasers}</span><span class="p">&gt;</span>  Activate Lasers
<span class="p">&lt;/</span><span class="nt">button</span><span class="p">&gt;</span>
</code></pre></td></tr></table>
</div>
</div><p>更多的有:</p>
<table>
<thead>
<tr>
<th>事件</th>
<th>含义</th>
</tr>
</thead>
<tbody>
<tr>
<td>onClick</td>
<td>点击事件</td>
</tr>
<tr>
<td>onChange</td>
<td>输入框改变事件</td>
</tr>
</tbody>
</table>
<h3 id="向事件处理程序传递参数">向事件处理程序传递参数</h3>
<blockquote>
<p>在循环中，通常我们会为事件处理函数传递额外的参数。例如，若 <code>id</code> 是你要删除那一行的 ID</p>
</blockquote>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-javascript" data-lang="javascript"><span class="o">&lt;</span><span class="nx">button</span> <span class="nx">onClick</span><span class="o">=</span><span class="p">{</span><span class="k">this</span><span class="p">.</span><span class="nx">deleteRow</span><span class="p">.</span><span class="nx">bind</span><span class="p">(</span><span class="k">this</span><span class="p">,</span> <span class="nx">id</span><span class="p">)}</span><span class="o">&gt;</span><span class="nx">Delete</span> <span class="nx">Row</span><span class="o">&lt;</span><span class="err">/button&gt;</span>

<span class="c1">// this 为隐式传递所以不用写上去
</span><span class="c1"></span><span class="nx">deleteRow</span><span class="p">(</span><span class="nx">id</span><span class="p">){</span>
    <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">id</span><span class="p">)</span>
<span class="p">}</span>
</code></pre></td></tr></table>
</div>
</div><h1 id="项目构建准则">项目构建准则</h1>
<h2 id="项目标准目录">项目标准目录</h2>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span><span class="lnt">26
</span><span class="lnt">27
</span><span class="lnt">28
</span><span class="lnt">29
</span><span class="lnt">30
</span><span class="lnt">31
</span><span class="lnt">32
</span><span class="lnt">33
</span><span class="lnt">34
</span><span class="lnt">35
</span><span class="lnt">36
</span><span class="lnt">37
</span><span class="lnt">38
</span><span class="lnt">39
</span><span class="lnt">40
</span><span class="lnt">41
</span><span class="lnt">42
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback">/* 一个例子 for 标准的前端react项目目录结构 */
├── common	/* 放整个项目的公共组件，如 header, footer */
│   └── header
│       ├── index.js
│       ├── store /* header 的公共数据管理 */
│       │   ├── actionCreator.js
│       │   ├── actionType.js
│       │   ├── headerReducer.js
│       │   └── index.js
│       └── style.js
├── index.js
├── pages 	/* 放项目不同页面的组件 */
│   ├── detail	/* 文章 detail 页面 */
│   │   └── index.js
│   └── home	/* 项目首页 */
│       ├── components	/* 项目首页的一些组件 */
│       │   ├── list.js
│       │   ├── recommend.js
│       │   ├── topic.js
│       │   └── writer.js
│       ├── index.js
│       ├── store     /* 项目首页的公共数据管理 */
│       │   ├── actionCreator.js 
│       │   ├── actionType.js
│       │   ├── homeReducer.js
│       │   └── index.js
│       └── style.js
├── static			 /* 项目静态数据 */
│   ├── cs.jpeg
│   ├── home.jpeg
│   ├── iconfont
│   │   ├── iconfont.js
│   │   ├── iconfont.svg
│   │   ├── iconfont.ttf
│   │   ├── iconfont.woff
│   │   └── iconfont.woff2
│   └── logo.png
├── store           /* 项目整个公共数据管理 */
│   ├── index.js
│   └── reducer.js
└── style.js
├── App.js
</code></pre></td></tr></table>
</div>
</div><h2 id="组件逻辑和ui拆分">组件逻辑和UI拆分</h2>
<p>组件 UI 和 逻辑可以分别拆分为两个文件，例如:</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span><span class="lnt">26
</span><span class="lnt">27
</span><span class="lnt">28
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-javascript" data-lang="javascript"><span class="cm">/* componentLogic.js */</span>

<span class="kr">import</span> <span class="nx">React</span><span class="p">,</span> <span class="p">{</span><span class="nx">Component</span><span class="p">}</span> <span class="nx">from</span> <span class="s1">&#39;react&#39;</span><span class="p">;</span>
<span class="kr">import</span> <span class="nx">componentUI</span> <span class="nx">from</span> <span class="s1">&#39;./componentUI&#39;</span>

<span class="kr">class</span> <span class="nx">componentLogic</span> <span class="kr">extends</span> <span class="nx">Component</span><span class="p">{</span>
  
    <span class="nx">constructor</span><span class="p">(</span><span class="nx">props</span><span class="p">){</span>
        <span class="kr">super</span><span class="p">(</span><span class="nx">props</span><span class="p">)</span>

        <span class="k">this</span><span class="p">.</span><span class="nx">func</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">func</span><span class="p">.</span><span class="nx">bind</span><span class="p">(</span><span class="k">this</span><span class="p">)</span>
    <span class="p">}</span>

    <span class="nx">render</span><span class="p">(){</span>
        <span class="k">return</span> <span class="p">(</span>
            <span class="o">&lt;</span><span class="nx">componentLogicUI</span> 
            
            <span class="c1">// 通过这种方式向 UI 组件传值
</span><span class="c1"></span>            <span class="nx">func</span> <span class="o">=</span> <span class="p">{</span><span class="k">this</span><span class="p">.</span><span class="nx">fuc</span><span class="p">}</span>
            <span class="o">/&gt;</span>
        <span class="p">);</span>
      <span class="p">}</span>
    
    <span class="nx">func</span><span class="p">(){</span>
       <span class="c1">// code ...
</span><span class="c1"></span>    <span class="p">}</span>
<span class="p">}</span>
<span class="kr">export</span> <span class="k">default</span> <span class="nx">componentLogic</span><span class="p">;</span>
</code></pre></td></tr></table>
</div>
</div><p>抽离的 UI 部分可以定义为一个 <strong>无状态UI组</strong> 相比于普通的组件，无状态组件加载销量更高，因为没有了一些生命周期函数.</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-javascript" data-lang="javascript"><span class="cm">/* componentUI.js */</span> 

<span class="c1">// 抽离 componentUI 的 UI 组件
</span><span class="c1">// 只负责定义 UI， 不涉及逻辑
</span><span class="c1"></span><span class="kr">import</span> <span class="nx">React</span> <span class="nx">from</span> <span class="s1">&#39;react&#39;</span>

<span class="cm">/* 无状态UI组件，相比于 Component 类，无状态组件新能更高 */</span> 
<span class="kr">const</span> <span class="nx">componentUI</span> <span class="o">=</span> <span class="p">(</span><span class="nx">props</span><span class="p">)</span> <span class="p">=&gt;</span> <span class="p">{</span>
    <span class="k">return</span><span class="p">(</span>
		<span class="o">&lt;</span><span class="nx">div</span> <span class="nx">props</span><span class="p">.</span><span class="nx">func</span><span class="o">&gt;</span>
        	<span class="p">...</span>
        <span class="o">&lt;</span><span class="err">/div&gt;</span>
    <span class="p">)</span>
<span class="p">}</span>

<span class="kr">export</span> <span class="k">default</span> <span class="nx">componentUI</span>
</code></pre></td></tr></table>
</div>
</div><h1 id="扩展">扩展</h1>
<h2 id="axios-ajax-操作"><code>axios</code> AJAX 操作</h2>
<h3 id="安装-1">安装</h3>
<p><code>React</code> 并没有对 <code>AJAX</code> 操作进行封装，使用时需可以安装 <code>axios</code> 。</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="c1"># 安装 axios</span>
<span class="nb">cd</span> your-app

yarn add axios
</code></pre></td></tr></table>
</div>
</div><p><strong>一般的初始化 <code>ajax</code> 操作会写在 <code>componentDidMount</code> 生命周期中</strong></p>
<h3 id="get"><code>get</code></h3>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-javascript" data-lang="javascript"><span class="kr">import</span> <span class="nx">axios</span> <span class="nx">from</span> <span class="s1">&#39;axios&#39;</span>

<span class="c1">// get ajax 操作
</span><span class="c1"></span><span class="nx">componentDidMount</span><span class="p">(){</span>
    <span class="nx">axios</span><span class="p">.</span><span class="nx">get</span><span class="p">(</span><span class="s1">&#39;/api/todoList&#39;</span><span class="p">)</span> 
        <span class="p">.</span><span class="nx">then</span><span class="p">((</span><span class="nx">res</span><span class="p">)</span> <span class="p">=&gt;</span> <span class="p">{</span>
        <span class="c1">// 成功
</span><span class="c1"></span>        <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s1">&#39;success&#39;</span><span class="p">);</span>

        <span class="c1">// 更新
</span><span class="c1"></span>        <span class="k">this</span><span class="p">.</span><span class="nx">setState</span><span class="p">(()</span> <span class="p">=&gt;</span> <span class="p">({</span>
            <span class="s1">&#39;list&#39;</span> <span class="o">:</span> <span class="nx">res</span><span class="p">.</span><span class="nx">data</span>
        <span class="p">}))</span>

    <span class="p">})</span>
        <span class="p">.</span><span class="k">catch</span><span class="p">(()</span> <span class="p">=&gt;</span> <span class="p">{</span>
        <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s1">&#39;error&#39;</span><span class="p">)</span>
    <span class="p">})</span>
<span class="p">}</span>
</code></pre></td></tr></table>
</div>
</div><h3 id="post"><code>post</code></h3>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-javascript" data-lang="javascript"><span class="kr">import</span> <span class="nx">axios</span> <span class="nx">from</span> <span class="s1">&#39;axios&#39;</span>

<span class="cm">/* post ajax */</span>
<span class="nx">componentDidMount</span><span class="p">()</span> <span class="p">{</span>
    <span class="nx">axios</span><span class="p">.</span><span class="nx">post</span><span class="p">(</span><span class="s1">&#39;/api/todoList&#39;</span><span class="p">,{</span>
        <span class="s1">&#39;title&#39;</span> <span class="o">:</span> <span class="s1">&#39;hello world&#39;</span><span class="p">,</span>
        <span class="s1">&#39;body&#39;</span>  <span class="o">:</span> <span class="s1">&#39;hello code day&#39;</span><span class="p">,</span>
        <span class="s1">&#39;category_id&#39;</span> <span class="o">:</span> <span class="mi">1</span>
    <span class="p">}).</span><span class="nx">then</span><span class="p">((</span><span class="nx">res</span><span class="p">)=&gt;{</span>

        <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">res</span><span class="p">.</span><span class="nx">status</span><span class="p">);</span>

    <span class="p">}).</span><span class="k">catch</span><span class="p">((</span><span class="nx">e</span><span class="p">)=&gt;{</span>

        <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">e</span><span class="p">)</span>

    <span class="p">})</span>
<span class="p">}</span>
</code></pre></td></tr></table>
</div>
</div><h2 id="styled-components"><code>styled-components</code></h2>
<p>这个扩展可以使得我们可以用 <code>js</code> 的方式引入 <code>css</code> 文件</p>
<p><code>styled-components</code> 可以对单独组件赋予样式，避免组件件样式冲突</p>
<h3 id="安装-2">安装</h3>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="nv">$yarn</span> add styled-components
</code></pre></td></tr></table>
</div>
</div><h3 id="全局样式">全局样式</h3>
<blockquote>
<p>使用 css reset 定义全局样式</p>
<p><a href="http://meyerweb.com/eric/tools/css/reset/">http://meyerweb.com/eric/tools/css/reset/</a></p>
</blockquote>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-javascript" data-lang="javascript"><span class="cm">/* 定义 */</span>
<span class="kr">import</span> <span class="p">{</span> <span class="nx">createGlobalStyle</span> <span class="p">}</span> <span class="nx">from</span> <span class="s1">&#39;styled-components&#39;</span>

<span class="cm">/* css 样式 */</span>
<span class="kr">export</span> <span class="kr">const</span> <span class="nx">Globalstyle</span> <span class="o">=</span> <span class="nx">createGlobalStyle</span><span class="sb">`
</span><span class="sb">	
</span><span class="sb">body{
</span><span class="sb">	
</span><span class="sb">}
</span><span class="sb">`</span>
</code></pre></td></tr></table>
</div>
</div><div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-javascript" data-lang="javascript"><span class="cm">/* 引入 */</span>
<span class="kr">import</span> <span class="p">{</span><span class="nx">Globalstyle</span><span class="p">}</span> <span class="nx">from</span> <span class="s1">&#39;./style.js&#39;</span><span class="p">;</span>

<span class="kd">function</span> <span class="nx">App</span><span class="p">()</span> <span class="p">{</span>
  <span class="k">return</span> <span class="p">(</span>
    <span class="o">&lt;</span><span class="nx">div</span> <span class="nx">className</span><span class="o">=</span><span class="s2">&#34;App&#34;</span><span class="o">&gt;</span>
      <span class="cm">/* 全局样式 */</span>
      <span class="o">&lt;</span><span class="nx">Globalstyle</span> <span class="o">/&gt;</span>
      <span class="o">&lt;</span><span class="nx">Header</span> <span class="o">/&gt;</span>
    <span class="o">&lt;</span><span class="err">/div&gt;</span>
  <span class="p">);</span>
<span class="p">}</span>
</code></pre></td></tr></table>
</div>
</div><h3 id="组件局部样式">组件局部样式</h3>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span><span class="lnt">7
</span><span class="lnt">8
</span><span class="lnt">9
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-javascript" data-lang="javascript"><span class="cm">/* 定义 */</span>
<span class="kr">import</span> <span class="nx">styled</span> <span class="nx">from</span> <span class="s1">&#39;styled-components&#39;</span>

<span class="cm">/* 为 div 定义一个样式名为 HeaderWrapper */</span>
<span class="kr">export</span> <span class="kr">const</span> <span class="nx">HeaderWrapper</span> <span class="o">=</span> <span class="nx">styled</span><span class="p">.</span><span class="nx">div</span><span class="sb">`
</span><span class="sb">    position : relative;
</span><span class="sb">    height : 56px;
</span><span class="sb">    border-bottom : 1px solid #f0f0f0;
</span><span class="sb">`</span>
</code></pre></td></tr></table>
</div>
</div><div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-javascript" data-lang="javascript"><span class="cm">/* 引入 */</span>
<span class="kr">import</span> <span class="p">{</span>
    <span class="nx">HeaderWrapper</span>
<span class="p">}</span><span class="nx">from</span> <span class="s1">&#39;./style&#39;</span>

<span class="kr">class</span> <span class="nx">Header</span> <span class="kr">extends</span> <span class="nx">Component</span><span class="p">{</span>
    <span class="nx">render</span><span class="p">(){</span>
        <span class="k">return</span> <span class="p">(</span>
            <span class="o">&lt;</span><span class="nx">HeaderWrapper</span><span class="o">&gt;</span><span class="nx">header</span><span class="o">&lt;</span><span class="err">/HeaderWrapper&gt;</span>
        <span class="p">)</span>
    <span class="p">}</span>
<span class="p">}</span>
</code></pre></td></tr></table>
</div>
</div><h3 id="选择器--和-">选择器 <code>&amp;</code> 和 <code>.</code></h3>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-html" data-lang="html"><span class="p">&lt;</span><span class="nt">List</span> <span class="na">calssName </span><span class="o">=</span> <span class="s">&#39;Wrapper&#39;</span><span class="p">&gt;</span>
    <span class="p">&lt;</span><span class="nt">Item</span> <span class="na">className </span><span class="o">=</span> <span class="s">&#39;Wrapper_Item&#39;</span><span class="p">/&gt;</span>
<span class="p">&lt;/</span><span class="nt">List</span><span class="p">&gt;</span>
</code></pre></td></tr></table>
</div>
</div><div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-js" data-lang="js"><span class="kr">import</span> <span class="nx">styled</span> <span class="nx">from</span> <span class="s1">&#39;styled-components&#39;</span>

<span class="cm">/* 如果在父元素中修饰子元素的样式则用 . */</span>
<span class="kr">export</span> <span class="kr">const</span> <span class="nx">List</span> <span class="o">=</span> <span class="nx">styled</span><span class="p">.</span><span class="nx">div</span><span class="sb">`
</span><span class="sb">	...
</span><span class="sb">
</span><span class="sb">    .Wrapper_Item{
</span><span class="sb">        ...
</span><span class="sb">    }
</span><span class="sb">`</span>

<span class="cm">/* 如果在是自己规定自己的某class的样式则用 &amp;. */</span>
<span class="kr">export</span> <span class="kr">const</span> <span class="nx">Item</span> <span class="o">=</span> <span class="nx">styled</span><span class="p">.</span><span class="nx">div</span><span class="sb">`
</span><span class="sb">	...
</span><span class="sb">
</span><span class="sb">    &amp;.Wrapper_Item{
</span><span class="sb">    ...
</span><span class="sb">    }
</span><span class="sb">`</span>
</code></pre></td></tr></table>
</div>
</div><h2 id="react-transition-group"><code>react-transition-group</code></h2>
<blockquote>
<p><a href="https://reactcommunity.org/react-transition-group/">react-transition-group</a> 是一个 react 动画扩展库</p>
</blockquote>
<h3 id="安装-3">安装</h3>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="nv">$yarn</span> add react-transition-group
</code></pre></td></tr></table>
</div>
</div><h3 id="入门使用">入门使用</h3>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-javascript" data-lang="javascript"><span class="kr">import</span> <span class="p">{</span> <span class="nx">CSSTransition</span> <span class="p">}</span> <span class="nx">from</span> <span class="s1">&#39;react-transition-group&#39;</span>

<span class="o">&lt;</span><span class="nx">Wrapper</span><span class="o">&gt;</span>
<span class="cm">/* 使用 CSSTransition 包裹需要动画效果的元素中 */</span>
<span class="o">&lt;</span><span class="nx">CSSTransition</span>
    <span class="nx">timeout</span> <span class="o">=</span> <span class="p">{</span><span class="mi">200</span><span class="p">}</span>
    <span class="k">in</span> <span class="o">=</span> <span class="p">{</span><span class="k">this</span><span class="p">.</span><span class="nx">state</span><span class="p">.</span><span class="nx">focused</span><span class="p">}</span>
    <span class="nx">classNames</span> <span class="o">=</span> <span class="s1">&#39;slide&#39;</span>
<span class="o">&gt;</span>
	<span class="o">&lt;</span><span class="nx">ItemNeedTransition</span><span class="o">&gt;</span>
<span class="o">&lt;</span><span class="err">/CSSTransition&gt;</span>
<span class="o">&lt;</span><span class="err">/Wrapper&gt;</span>
</code></pre></td></tr></table>
</div>
</div><p>这里的 <code>CSSTransition</code> 需要定义一些初始属性：</p>
<ul>
<li><code>timeout</code> 定义动画的是时间</li>
<li><code>in</code> 是一个 <code>bool</code> 值，当为 <code>true</code> 的时候，启动动画的 <code>enter</code> 效果，当为 <code>false</code> 时，启动动画的 <code>exit</code> 效果</li>
<li><code>className</code> 定义在 <code>css</code> 中修饰的属性前缀</li>
</ul>
<p><strong>动画的定义</strong></p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-javascript" data-lang="javascript"><span class="kr">export</span> <span class="kr">const</span> <span class="nx">Wrapper</span> <span class="o">=</span> <span class="nx">styled</span><span class="p">.</span><span class="nx">div</span><span class="sb">`
</span><span class="sb">		
</span><span class="sb">	/* 这两个样式定义当in为true 时候的动画 */
</span><span class="sb">	.slide-enter {
</span><span class="sb">        transition : all .2s ease-out
</span><span class="sb">    }
</span><span class="sb">    
</span><span class="sb">    .slide-enter-active{
</span><span class="sb">        width : 250px;
</span><span class="sb">    }
</span><span class="sb">
</span><span class="sb">
</span><span class="sb">	/* 这两个样式定义当in为false 时候的动画 */
</span><span class="sb">    .slide-exit {
</span><span class="sb">        transition : all .2s ease-out
</span><span class="sb">    }
</span><span class="sb">    .slide-exit-active{
</span><span class="sb">        width : 160px;
</span><span class="sb">    }
</span><span class="sb">`</span>
</code></pre></td></tr></table>
</div>
</div><h2 id="react-router-dom"><code>react-router-dom</code></h2>
<p><code>react</code> 路由扩展, 可以实现组件的根据路由显示。</p>
<h3 id="安装-4">安装</h3>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="c1"># 安装</span>
<span class="nv">$yarn</span> add react-router-dom
</code></pre></td></tr></table>
</div>
</div><h3 id="使用">使用</h3>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-javascript" data-lang="javascript"><span class="cm">/* 入口 App Component 中 */</span>
<span class="kr">import</span> <span class="p">{</span> <span class="nx">Route</span><span class="p">,</span> <span class="nx">BrowserRouter</span> <span class="p">}</span> <span class="nx">from</span> <span class="s1">&#39;react-router-dom&#39;</span><span class="p">;</span>

<span class="kd">function</span> <span class="nx">App</span><span class="p">()</span> <span class="p">{</span>
  <span class="k">return</span> <span class="p">(</span>
    <span class="o">&lt;</span><span class="nx">div</span> <span class="nx">className</span><span class="o">=</span><span class="s1">&#39;App&#39;</span><span class="o">&gt;</span>
      <span class="o">&lt;</span><span class="nx">Header</span> <span class="o">/&gt;</span>
      <span class="o">&lt;</span><span class="nx">BrowserRouter</span><span class="o">&gt;</span>
        <span class="o">&lt;</span><span class="nx">div</span><span class="o">&gt;</span>
          <span class="o">&lt;</span><span class="nx">Route</span> <span class="nx">path</span> <span class="o">=</span> <span class="s1">&#39;/&#39;</span> <span class="nx">exact</span> <span class="nx">render</span> <span class="o">=</span> <span class="p">{()=&gt;</span><span class="o">&lt;</span><span class="nx">div</span><span class="o">&gt;</span><span class="nx">home</span><span class="o">&lt;</span><span class="err">/div&gt;}&gt;&lt;/Route&gt;</span>
          <span class="o">&lt;</span><span class="nx">Route</span> <span class="nx">path</span> <span class="o">=</span> <span class="s1">&#39;/detail&#39;</span> <span class="nx">exact</span> <span class="nx">render</span> <span class="o">=</span> <span class="p">{()=&gt;</span><span class="o">&lt;</span><span class="nx">div</span><span class="o">&gt;</span><span class="nx">detail</span><span class="o">&lt;</span><span class="err">/div&gt;}&gt;&lt;/Route&gt;</span>
        <span class="o">&lt;</span><span class="err">/div&gt;</span>
      <span class="o">&lt;</span><span class="err">/BrowserRouter&gt;</span>
    <span class="o">&lt;</span><span class="err">/div&gt;</span>
  <span class="p">);</span>
<span class="p">}</span>
</code></pre></td></tr></table>
</div>
</div><ul>
<li>
<p>当路由为 <code>/</code> (根域名) 的时候，显示。</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-javascript" data-lang="javascript"><span class="o">&lt;</span><span class="nx">Route</span> <span class="nx">path</span> <span class="o">=</span> <span class="s1">&#39;/&#39;</span> <span class="nx">exact</span> <span class="nx">render</span> <span class="o">=</span> <span class="p">{()=&gt;</span><span class="o">&lt;</span><span class="nx">div</span><span class="o">&gt;</span><span class="nx">home</span><span class="o">&lt;</span><span class="err">/div&gt;}&gt;&lt;/Route&gt;</span>
</code></pre></td></tr></table>
</div>
</div></li>
<li>
<p>当路由为 <code>/detail</code> , 显示。</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-javascript" data-lang="javascript"><span class="o">&lt;</span><span class="nx">Route</span> <span class="nx">path</span> <span class="o">=</span> <span class="s1">&#39;/detail&#39;</span> <span class="nx">exact</span> <span class="nx">render</span> <span class="o">=</span> <span class="p">{()=&gt;</span><span class="o">&lt;</span><span class="nx">div</span><span class="o">&gt;</span><span class="nx">detail</span><span class="o">&lt;</span><span class="err">/div&gt;}&gt;&lt;/Route&gt;</span>
</code></pre></td></tr></table>
</div>
</div></li>
</ul>
<p><code>exact</code> 表示路由的精准匹配。否则在 <code>/detail</code> 的时候，也会匹配到 <code>/</code> 从而输出两个组件的内容。</p>
<h3 id="更一般的">更一般的</h3>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-javascript" data-lang="javascript"><span class="cm">/* 更一般的将组件引入 */</span>
<span class="kr">import</span> <span class="nx">React</span> <span class="nx">from</span> <span class="s1">&#39;react&#39;</span><span class="p">;</span>
<span class="kr">import</span> <span class="nx">Header</span> <span class="nx">from</span> <span class="s1">&#39;./common/header&#39;</span>
<span class="kr">import</span> <span class="p">{</span> <span class="nx">Route</span><span class="p">,</span> <span class="nx">BrowserRouter</span> <span class="p">}</span> <span class="nx">from</span> <span class="s1">&#39;react-router-dom&#39;</span><span class="p">;</span>
<span class="kr">import</span> <span class="nx">Home</span> <span class="nx">from</span> <span class="s1">&#39;./pages/home&#39;</span><span class="p">;</span>
<span class="kr">import</span> <span class="nx">Detail</span> <span class="nx">from</span> <span class="s1">&#39;./pages/detail&#39;</span><span class="p">;</span>

<span class="kd">function</span> <span class="nx">App</span><span class="p">()</span> <span class="p">{</span>
  <span class="k">return</span> <span class="p">(</span>
    <span class="o">&lt;</span><span class="nx">div</span> <span class="nx">className</span><span class="o">=</span><span class="s2">&#34;App&#34;</span><span class="o">&gt;</span>
      <span class="o">&lt;</span><span class="nx">Header</span> <span class="o">/&gt;</span>
      <span class="o">&lt;</span><span class="nx">BrowserRouter</span><span class="o">&gt;</span>
        <span class="o">&lt;</span><span class="nx">div</span><span class="o">&gt;</span>
      	  <span class="cm">/* 组件引入 */</span>
      	  <span class="cm">/* 注意&lt;Route&gt;&lt;/Route&gt;中间不得有空格 */</span>
          <span class="o">&lt;</span><span class="nx">Route</span> <span class="nx">path</span> <span class="o">=</span> <span class="s1">&#39;/&#39;</span> <span class="nx">exact</span> <span class="nx">component</span> <span class="o">=</span> <span class="p">{</span><span class="nx">Home</span><span class="p">}</span><span class="o">&gt;&lt;</span><span class="err">/Route&gt;</span>
          <span class="o">&lt;</span><span class="nx">Route</span> <span class="nx">path</span> <span class="o">=</span> <span class="s1">&#39;/detail&#39;</span> <span class="nx">exact</span> <span class="nx">component</span> <span class="o">=</span> <span class="p">{</span><span class="nx">Detail</span><span class="p">}</span><span class="o">&gt;&lt;</span><span class="err">/Route&gt;</span>
        <span class="o">&lt;</span><span class="err">/div&gt;</span>
      <span class="o">&lt;</span><span class="err">/BrowserRouter&gt;</span>
    <span class="o">&lt;</span><span class="err">/div&gt;</span>
  <span class="p">);</span>
<span class="p">}</span>
<span class="kr">export</span> <span class="k">default</span> <span class="nx">App</span><span class="p">;</span>
</code></pre></td></tr></table>
</div>
</div><h3 id="动态路由---必选参数">动态路由 - 必选参数</h3>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-jsx" data-lang="jsx"><span class="cm">/* 带参路由的写法 */</span>
<span class="p">&lt;</span><span class="nt">Route</span> <span class="na">path </span><span class="o">=</span> <span class="s">&#39;/detail/:id&#39;</span> <span class="na">exact</span> <span class="na">component </span><span class="o">=</span> <span class="p">{</span><span class="nx">Detail</span><span class="p">}&gt;&lt;/</span><span class="nt">Route</span><span class="p">&gt;</span>


<span class="cm">/* 对应的页面获取 id */</span>
<span class="k">this</span><span class="p">.</span><span class="nx">props</span><span class="p">.</span><span class="nx">match</span><span class="p">.</span><span class="nx">params</span><span class="p">.</span><span class="nx">id</span>
</code></pre></td></tr></table>
</div>
</div><h3 id="动态路由---可选参数">动态路由 - 可选参数</h3>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-jsx" data-lang="jsx"><span class="cm">/* 参数后面带问号表示可选参数 */</span>
<span class="p">&lt;</span><span class="nt">Route</span> <span class="na">path </span><span class="o">=</span> <span class="s">&#39;/detail/:id/:slug?&#39;</span> <span class="na">exact</span> <span class="na">component </span><span class="o">=</span> <span class="p">{</span><span class="nx">Detail</span><span class="p">}&gt;&lt;/</span><span class="nt">Route</span><span class="p">&gt;</span>
</code></pre></td></tr></table>
</div>
</div><h3 id="标签跳转link">标签跳转<code>Link</code></h3>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-java" data-lang="java"><span class="kn">import</span> <span class="err">{</span><span class="nn">Link</span><span class="o">}</span> <span class="n">from</span> <span class="err">&#39;</span><span class="n">react</span><span class="o">-</span><span class="n">router</span><span class="o">-</span><span class="n">dom</span><span class="err">&#39;</span><span class="o">;</span>

<span class="cm">/* 可以将包裹的DOM变为一个链接，跳转到/detail */</span>
<span class="o">&lt;</span><span class="n">Link</span> <span class="n">to</span><span class="o">={</span><span class="err">&#39;</span><span class="o">/</span><span class="n">detail</span><span class="err">&#39;</span><span class="o">}&gt;</span>
	<span class="o">...</span>
<span class="o">&lt;/</span><span class="n">Link</span><span class="o">&gt;</span>
</code></pre></td></tr></table>
</div>
</div><h3 id="路由重定向">路由重定向</h3>
<ul>
<li>
<p><code>JS</code> 中实现:</p>
<p>场景：比如在登陆成功后重定向到首页。</p>
<p>在JS中可是使用 <code>this.props.history.push('/');</code>实现，其中 this 指向 <code>component</code></p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-javascript" data-lang="javascript">  <span class="kr">import</span> <span class="nx">React</span><span class="p">,</span> <span class="p">{</span><span class="nx">Component</span><span class="p">}</span> <span class="nx">from</span> <span class="s2">&#34;react&#34;</span><span class="p">;</span>
  <span class="kr">import</span> <span class="p">{</span><span class="nx">connect</span><span class="p">}</span> <span class="nx">from</span> <span class="s2">&#34;react-redux&#34;</span><span class="p">;</span>

  <span class="kr">class</span> <span class="nx">Login</span> <span class="kr">extends</span> <span class="nx">Component</span><span class="p">{</span>

      <span class="nx">render</span><span class="p">(){</span>
          <span class="cm">/* 注意要bind this */</span>
          <span class="kr">const</span> <span class="nx">HandlerLogin</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">props</span><span class="p">.</span><span class="nx">HandlerLogin</span><span class="p">.</span><span class="nx">bind</span><span class="p">(</span><span class="k">this</span><span class="p">)</span>
          <span class="k">return</span> <span class="p">(</span>
          <span class="o">&lt;</span><span class="nx">Button</span>
            <span class="nx">onClick</span><span class="o">=</span><span class="p">{()</span> <span class="p">=&gt;</span> <span class="nx">HandlerLogin</span><span class="p">()}</span>
          <span class="o">&gt;</span><span class="nx">提交</span>
          <span class="p">)</span>    
      <span class="p">}</span>
  <span class="p">}</span>

  <span class="kr">const</span> <span class="nx">mapDispatchToProps</span> <span class="o">=</span> <span class="p">(</span><span class="nx">dispatch</span><span class="p">)=&gt;{</span>
       <span class="nx">HandlerLogin</span><span class="p">(){</span>
        <span class="c1">// code ....
</span><span class="c1"></span>
        <span class="c1">// 重定向
</span><span class="c1"></span>        <span class="k">this</span><span class="p">.</span><span class="nx">props</span><span class="p">.</span><span class="nx">history</span><span class="p">.</span><span class="nx">push</span><span class="p">(</span><span class="s1">&#39;/&#39;</span><span class="p">);</span>
      <span class="p">}</span>   
  <span class="p">}</span>
</code></pre></td></tr></table>
</div>
</div></li>
<li>
<p><code>&lt;Redirect&gt;</code> 标签实现:</p>
<p>场景：比如对于某一个 component, 需要登陆之后才能进行操作</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-javascript" data-lang="javascript"><span class="kr">import</span> <span class="p">{</span> <span class="nx">Redirect</span> <span class="p">}</span> <span class="nx">from</span> <span class="s1">&#39;react-router-dom&#39;</span><span class="p">;</span>

<span class="kr">class</span> <span class="nx">Write</span> <span class="kr">extends</span> <span class="nx">Component</span><span class="p">{</span>
    <span class="nx">render</span><span class="p">(){</span>
        <span class="kr">const</span> <span class="p">{</span><span class="nx">logged</span><span class="p">}</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">props</span>
        <span class="k">if</span><span class="p">(</span><span class="nx">logged</span><span class="p">){</span>
            <span class="cm">/* 如果登陆则展示写页面 */</span>
            <span class="k">return</span><span class="p">(</span>
                <span class="c1">// write pages
</span><span class="c1"></span>            <span class="p">)</span>
        <span class="p">}</span><span class="k">else</span><span class="p">{</span>
            <span class="cm">/* 否则重定向到 login */</span>
            <span class="k">return</span> <span class="p">(</span>
                <span class="o">&lt;</span><span class="nx">Redirect</span> <span class="nx">to</span><span class="o">=</span><span class="s1">&#39;/login&#39;</span> <span class="o">/&gt;</span>
            <span class="p">)</span>
        <span class="p">}</span>
    <span class="p">}</span>
<span class="p">}</span>
</code></pre></td></tr></table>
</div>
</div></li>
</ul>
<h2 id="react-loadable"><code>react-loadable</code></h2>

    </div>

    <div class="post-copyright">
  <p class="copyright-item">
    <span class="item-title">文章作者</span>
    <span class="item-content">LYR</span>
  </p>
  <p class="copyright-item">
    <span class="item-title">上次更新</span>
    <span class="item-content">
        2021-08-14
        
    </span>
  </p>
  
  
</div>
<footer class="post-footer">
      
      <nav class="post-nav">
        <a class="prev" href="/post/10.%E6%A0%A1%E6%8B%9B%E7%AC%94%E8%AE%B0/react-ecology/javascript/">
            <i class="iconfont icon-left"></i>
            <span class="prev-text nav-default">javaScript</span>
            <span class="prev-text nav-mobile">上一篇</span>
          </a>
        <a class="next" href="/post/10.%E6%A0%A1%E6%8B%9B%E7%AC%94%E8%AE%B0/react-ecology/redux/">
            <span class="next-text nav-default">redux</span>
            <span class="next-text nav-mobile">下一篇</span>
            <i class="iconfont icon-right"></i>
          </a>
      </nav>
    </footer>
  </article>
        </div>
        

  

  

      </div>
    </main>

    <footer id="footer" class="footer">
      <div class="social-links">
      <a href="mailto:lyr-2000@qq.com" class="iconfont icon-email" title="email"></a>
  <a href="http://doc.lyr-2000.xyz/index.xml" type="application/rss+xml" class="iconfont icon-rss" title="rss"></a>
</div>

<div class="copyright">
  <span class="power-by">
    由 <a class="hexo-link" href="https://gohugo.io">Hugo</a> 强力驱动
  </span>
  <span class="division">|</span>
  <span class="theme-info">
    主题 - 
    <a class="theme-link" href="https://github.com/olOwOlo/hugo-theme-even">Even</a>
  </span>

  

  <span class="copyright-year">
    &copy; 
    2021<span class="heart"><i class="iconfont icon-heart"></i></span><span>lyr</span>
  </span>
</div>

    </footer>

    <div class="back-to-top" id="back-to-top">
      <i class="iconfont icon-up"></i>
    </div>
  </div>
  
  <script src="https://cdn.jsdelivr.net/npm/jquery@3.2.1/dist/jquery.min.js" integrity="sha256-hwg4gsxgFZhOsEEamdOYGBf13FyQuiTwlAQgxVSNgt4=" crossorigin="anonymous"></script>
  <script src="https://cdn.jsdelivr.net/npm/slideout@1.0.1/dist/slideout.min.js" integrity="sha256-t+zJ/g8/KXIJMjSVQdnibt4dlaDxc9zXr/9oNPeWqdg=" crossorigin="anonymous"></script>
  <script src="https://cdn.jsdelivr.net/npm/@fancyapps/fancybox@3.1.20/dist/jquery.fancybox.min.js" integrity="sha256-XVLffZaxoWfGUEbdzuLi7pwaUJv1cecsQJQqGLe7axY=" crossorigin="anonymous"></script>



<script type="text/javascript" src="/js/main.min.c99b103c33d1539acf3025e1913697534542c4a5aa5af0ccc20475ed2863603b.js"></script>
  <script type="text/javascript">
    window.MathJax = {
      tex: {
        inlineMath: [['$','$'], ['\\(','\\)']],
        tags: 'ams',
        }
    };
  </script>
  <script async src="https://cdn.jsdelivr.net/npm/mathjax@3.0.5/es5/tex-mml-chtml.js" integrity="sha256-HGLuEfFcsUJGhvB8cQ8nr0gai9EucOOaIxFw7qxmd+w=" crossorigin="anonymous"></script>






<script src="/js//custom/latex_plugin.js"></script>


</body>
</html>
